"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/expandyourweb/page",{

/***/ "(app-pages-browser)/./src/components/three/Star.js":
/*!**************************************!*\
  !*** ./src/components/three/Star.js ***!
  \**************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ Cosmos; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _react_three_fiber__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @react-three/fiber */ \"(app-pages-browser)/./node_modules/@react-three/fiber/dist/react-three-fiber.esm.js\");\n/* harmony import */ var _react_three_fiber__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @react-three/fiber */ \"(app-pages-browser)/./node_modules/@react-three/fiber/dist/index-d98fd1c7.esm.js\");\n/* harmony import */ var three_stdlib__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! three-stdlib */ \"(app-pages-browser)/./node_modules/three-stdlib/controls/OrbitControls.js\");\n/* harmony import */ var three_stdlib__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! three-stdlib */ \"(app-pages-browser)/./node_modules/three-stdlib/controls/TransformControls.js\");\n/* harmony import */ var _react_three_drei__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @react-three/drei */ \"(app-pages-browser)/./node_modules/@react-three/drei/core/Stars.js\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\n\n\n(0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_2__.e)({\n    OrbitControls: three_stdlib__WEBPACK_IMPORTED_MODULE_3__.OrbitControls,\n    TransformControls: three_stdlib__WEBPACK_IMPORTED_MODULE_4__.TransformControls\n});\n\nfunction Box() {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"mesh\", {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"boxBufferGeometry\", {\n                attach: \"geometry\"\n            }, void 0, false, {\n                fileName: \"/Users/slay3r/cobweb/src/components/three/Star.js\",\n                lineNumber: 14,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meshLambertMaterial\", {\n                attach: \"material\",\n                color: \"hotpink\"\n            }, void 0, false, {\n                fileName: \"/Users/slay3r/cobweb/src/components/three/Star.js\",\n                lineNumber: 15,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/slay3r/cobweb/src/components/three/Star.js\",\n        lineNumber: 13,\n        columnNumber: 7\n    }, this);\n}\n_c = Box;\nfunction Cosmos() {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_react_three_fiber__WEBPACK_IMPORTED_MODULE_5__.Canvas, {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"ambientLight\", {\n                intensity: 0.5\n            }, void 0, false, {\n                fileName: \"/Users/slay3r/cobweb/src/components/three/Star.js\",\n                lineNumber: 22,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(three_stdlib__WEBPACK_IMPORTED_MODULE_3__.OrbitControls, {}, void 0, false, {\n                fileName: \"/Users/slay3r/cobweb/src/components/three/Star.js\",\n                lineNumber: 23,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_react_three_drei__WEBPACK_IMPORTED_MODULE_6__.Stars, {}, void 0, false, {\n                fileName: \"/Users/slay3r/cobweb/src/components/three/Star.js\",\n                lineNumber: 24,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Box, {}, void 0, false, {\n                fileName: \"/Users/slay3r/cobweb/src/components/three/Star.js\",\n                lineNumber: 25,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/slay3r/cobweb/src/components/three/Star.js\",\n        lineNumber: 21,\n        columnNumber: 7\n    }, this);\n}\n_c1 = Cosmos;\nvar _c, _c1;\n$RefreshReg$(_c, \"Box\");\n$RefreshReg$(_c1, \"Cosmos\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb21wb25lbnRzL3RocmVlL1N0YXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUUwQjtBQUNrQjtBQUNEO0FBQ29CO0FBQy9ERSxxREFBTUEsQ0FBQztJQUFFQyxhQUFhQSx5REFBQUE7SUFBRUMsaUJBQWlCQSw2REFBQUE7QUFBQztBQUVBO0FBRTFDLFNBQVNFO0lBQ0wscUJBQ0UsOERBQUNDOzswQkFDQyw4REFBQ0M7Z0JBQWtCQyxRQUFPOzs7Ozs7MEJBQzFCLDhEQUFDQztnQkFBb0JELFFBQU87Z0JBQVdFLE9BQU07Ozs7Ozs7Ozs7OztBQUduRDtLQVBPTDtBQVFNLFNBQVNNO0lBQ3BCLHFCQUNFLDhEQUFDWCxzREFBTUE7OzBCQUNMLDhEQUFDWTtnQkFBYUMsV0FBVzs7Ozs7OzBCQUN6Qiw4REFBQ1gsdURBQWFBOzs7OzswQkFDZCw4REFBQ0Usb0RBQUtBOzs7OzswQkFDTiw4REFBQ0M7Ozs7Ozs7Ozs7O0FBSVQ7TUFWd0JNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9jb21wb25lbnRzL3RocmVlL1N0YXIuanM/MGVjMiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcblxuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgQ2FudmFzIH0gZnJvbSBcIkByZWFjdC10aHJlZS9maWJlclwiO1xuaW1wb3J0IHsgZXh0ZW5kIH0gZnJvbSAnQHJlYWN0LXRocmVlL2ZpYmVyJ1xuaW1wb3J0IHsgT3JiaXRDb250cm9scywgVHJhbnNmb3JtQ29udHJvbHMgfSBmcm9tICd0aHJlZS1zdGRsaWInXG5leHRlbmQoeyBPcmJpdENvbnRyb2xzLCBUcmFuc2Zvcm1Db250cm9scyB9KVxuXG5pbXBvcnQgeyBTdGFycyB9IGZyb20gJ0ByZWFjdC10aHJlZS9kcmVpJztcblxuZnVuY3Rpb24gQm94KCkge1xuICAgIHJldHVybiAoXG4gICAgICA8bWVzaD5cbiAgICAgICAgPGJveEJ1ZmZlckdlb21ldHJ5IGF0dGFjaD1cImdlb21ldHJ5XCIgLz5cbiAgICAgICAgPG1lc2hMYW1iZXJ0TWF0ZXJpYWwgYXR0YWNoPVwibWF0ZXJpYWxcIiBjb2xvcj1cImhvdHBpbmtcIi8+XG4gICAgICA8L21lc2g+XG4gICAgKTtcbiAgfVxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ29zbW9zKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8Q2FudmFzPlxuICAgICAgICA8YW1iaWVudExpZ2h0IGludGVuc2l0eT17MC41fSAvPlxuICAgICAgICA8T3JiaXRDb250cm9scyAvPlxuICAgICAgICA8U3RhcnMgLz5cbiAgICAgICAgPEJveCAvPlxuICAgICAgPC9DYW52YXM+XG4gICAgKTtcbiAgXG59XG4gICJdLCJuYW1lcyI6WyJSZWFjdCIsIkNhbnZhcyIsImV4dGVuZCIsIk9yYml0Q29udHJvbHMiLCJUcmFuc2Zvcm1Db250cm9scyIsIlN0YXJzIiwiQm94IiwibWVzaCIsImJveEJ1ZmZlckdlb21ldHJ5IiwiYXR0YWNoIiwibWVzaExhbWJlcnRNYXRlcmlhbCIsImNvbG9yIiwiQ29zbW9zIiwiYW1iaWVudExpZ2h0IiwiaW50ZW5zaXR5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/components/three/Star.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/three-stdlib/controls/TransformControls.js":
/*!*****************************************************************!*\
  !*** ./node_modules/three-stdlib/controls/TransformControls.js ***!
  \*****************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TransformControls: function() { return /* binding */ TransformControls; },\n/* harmony export */   TransformControlsGizmo: function() { return /* binding */ TransformControlsGizmo; },\n/* harmony export */   TransformControlsPlane: function() { return /* binding */ TransformControlsPlane; }\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"(app-pages-browser)/./node_modules/three/build/three.module.js\");\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\nclass TransformControls extends three__WEBPACK_IMPORTED_MODULE_0__.Object3D {\n  constructor(camera, domElement) {\n    super();\n    __publicField(this, \"isTransformControls\", true);\n    __publicField(this, \"visible\", false);\n    __publicField(this, \"domElement\");\n    __publicField(this, \"raycaster\", new three__WEBPACK_IMPORTED_MODULE_0__.Raycaster());\n    __publicField(this, \"gizmo\");\n    __publicField(this, \"plane\");\n    __publicField(this, \"tempVector\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3());\n    __publicField(this, \"tempVector2\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3());\n    __publicField(this, \"tempQuaternion\", new three__WEBPACK_IMPORTED_MODULE_0__.Quaternion());\n    __publicField(this, \"unit\", {\n      X: new three__WEBPACK_IMPORTED_MODULE_0__.Vector3(1, 0, 0),\n      Y: new three__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 1, 0),\n      Z: new three__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 0, 1)\n    });\n    __publicField(this, \"pointStart\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3());\n    __publicField(this, \"pointEnd\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3());\n    __publicField(this, \"offset\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3());\n    __publicField(this, \"rotationAxis\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3());\n    __publicField(this, \"startNorm\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3());\n    __publicField(this, \"endNorm\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3());\n    __publicField(this, \"rotationAngle\", 0);\n    __publicField(this, \"cameraPosition\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3());\n    __publicField(this, \"cameraQuaternion\", new three__WEBPACK_IMPORTED_MODULE_0__.Quaternion());\n    __publicField(this, \"cameraScale\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3());\n    __publicField(this, \"parentPosition\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3());\n    __publicField(this, \"parentQuaternion\", new three__WEBPACK_IMPORTED_MODULE_0__.Quaternion());\n    __publicField(this, \"parentQuaternionInv\", new three__WEBPACK_IMPORTED_MODULE_0__.Quaternion());\n    __publicField(this, \"parentScale\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3());\n    __publicField(this, \"worldPositionStart\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3());\n    __publicField(this, \"worldQuaternionStart\", new three__WEBPACK_IMPORTED_MODULE_0__.Quaternion());\n    __publicField(this, \"worldScaleStart\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3());\n    __publicField(this, \"worldPosition\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3());\n    __publicField(this, \"worldQuaternion\", new three__WEBPACK_IMPORTED_MODULE_0__.Quaternion());\n    __publicField(this, \"worldQuaternionInv\", new three__WEBPACK_IMPORTED_MODULE_0__.Quaternion());\n    __publicField(this, \"worldScale\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3());\n    __publicField(this, \"eye\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3());\n    __publicField(this, \"positionStart\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3());\n    __publicField(this, \"quaternionStart\", new three__WEBPACK_IMPORTED_MODULE_0__.Quaternion());\n    __publicField(this, \"scaleStart\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3());\n    __publicField(this, \"camera\");\n    __publicField(this, \"object\");\n    __publicField(this, \"enabled\", true);\n    __publicField(this, \"axis\", null);\n    __publicField(this, \"mode\", \"translate\");\n    __publicField(this, \"translationSnap\", null);\n    __publicField(this, \"rotationSnap\", null);\n    __publicField(this, \"scaleSnap\", null);\n    __publicField(this, \"space\", \"world\");\n    __publicField(this, \"size\", 1);\n    __publicField(this, \"dragging\", false);\n    __publicField(this, \"showX\", true);\n    __publicField(this, \"showY\", true);\n    __publicField(this, \"showZ\", true);\n    // events\n    __publicField(this, \"changeEvent\", { type: \"change\" });\n    __publicField(this, \"mouseDownEvent\", { type: \"mouseDown\", mode: this.mode });\n    __publicField(this, \"mouseUpEvent\", { type: \"mouseUp\", mode: this.mode });\n    __publicField(this, \"objectChangeEvent\", { type: \"objectChange\" });\n    __publicField(this, \"intersectObjectWithRay\", (object, raycaster, includeInvisible) => {\n      const allIntersections = raycaster.intersectObject(object, true);\n      for (let i = 0; i < allIntersections.length; i++) {\n        if (allIntersections[i].object.visible || includeInvisible) {\n          return allIntersections[i];\n        }\n      }\n      return false;\n    });\n    // Set current object\n    __publicField(this, \"attach\", (object) => {\n      this.object = object;\n      this.visible = true;\n      return this;\n    });\n    // Detatch from object\n    __publicField(this, \"detach\", () => {\n      this.object = void 0;\n      this.visible = false;\n      this.axis = null;\n      return this;\n    });\n    // Reset\n    __publicField(this, \"reset\", () => {\n      if (!this.enabled)\n        return this;\n      if (this.dragging) {\n        if (this.object !== void 0) {\n          this.object.position.copy(this.positionStart);\n          this.object.quaternion.copy(this.quaternionStart);\n          this.object.scale.copy(this.scaleStart);\n          this.dispatchEvent(this.changeEvent);\n          this.dispatchEvent(this.objectChangeEvent);\n          this.pointStart.copy(this.pointEnd);\n        }\n      }\n      return this;\n    });\n    __publicField(this, \"updateMatrixWorld\", () => {\n      if (this.object !== void 0) {\n        this.object.updateMatrixWorld();\n        if (this.object.parent === null) {\n          console.error(\"TransformControls: The attached 3D object must be a part of the scene graph.\");\n        } else {\n          this.object.parent.matrixWorld.decompose(this.parentPosition, this.parentQuaternion, this.parentScale);\n        }\n        this.object.matrixWorld.decompose(this.worldPosition, this.worldQuaternion, this.worldScale);\n        this.parentQuaternionInv.copy(this.parentQuaternion).invert();\n        this.worldQuaternionInv.copy(this.worldQuaternion).invert();\n      }\n      this.camera.updateMatrixWorld();\n      this.camera.matrixWorld.decompose(this.cameraPosition, this.cameraQuaternion, this.cameraScale);\n      this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize();\n      super.updateMatrixWorld();\n    });\n    __publicField(this, \"pointerHover\", (pointer) => {\n      if (this.object === void 0 || this.dragging === true)\n        return;\n      this.raycaster.setFromCamera(pointer, this.camera);\n      const intersect = this.intersectObjectWithRay(this.gizmo.picker[this.mode], this.raycaster);\n      if (intersect) {\n        this.axis = intersect.object.name;\n      } else {\n        this.axis = null;\n      }\n    });\n    __publicField(this, \"pointerDown\", (pointer) => {\n      if (this.object === void 0 || this.dragging === true || pointer.button !== 0)\n        return;\n      if (this.axis !== null) {\n        this.raycaster.setFromCamera(pointer, this.camera);\n        const planeIntersect = this.intersectObjectWithRay(this.plane, this.raycaster, true);\n        if (planeIntersect) {\n          let space = this.space;\n          if (this.mode === \"scale\") {\n            space = \"local\";\n          } else if (this.axis === \"E\" || this.axis === \"XYZE\" || this.axis === \"XYZ\") {\n            space = \"world\";\n          }\n          if (space === \"local\" && this.mode === \"rotate\") {\n            const snap = this.rotationSnap;\n            if (this.axis === \"X\" && snap)\n              this.object.rotation.x = Math.round(this.object.rotation.x / snap) * snap;\n            if (this.axis === \"Y\" && snap)\n              this.object.rotation.y = Math.round(this.object.rotation.y / snap) * snap;\n            if (this.axis === \"Z\" && snap)\n              this.object.rotation.z = Math.round(this.object.rotation.z / snap) * snap;\n          }\n          this.object.updateMatrixWorld();\n          if (this.object.parent) {\n            this.object.parent.updateMatrixWorld();\n          }\n          this.positionStart.copy(this.object.position);\n          this.quaternionStart.copy(this.object.quaternion);\n          this.scaleStart.copy(this.object.scale);\n          this.object.matrixWorld.decompose(this.worldPositionStart, this.worldQuaternionStart, this.worldScaleStart);\n          this.pointStart.copy(planeIntersect.point).sub(this.worldPositionStart);\n        }\n        this.dragging = true;\n        this.mouseDownEvent.mode = this.mode;\n        this.dispatchEvent(this.mouseDownEvent);\n      }\n    });\n    __publicField(this, \"pointerMove\", (pointer) => {\n      const axis = this.axis;\n      const mode = this.mode;\n      const object = this.object;\n      let space = this.space;\n      if (mode === \"scale\") {\n        space = \"local\";\n      } else if (axis === \"E\" || axis === \"XYZE\" || axis === \"XYZ\") {\n        space = \"world\";\n      }\n      if (object === void 0 || axis === null || this.dragging === false || pointer.button !== -1)\n        return;\n      this.raycaster.setFromCamera(pointer, this.camera);\n      const planeIntersect = this.intersectObjectWithRay(this.plane, this.raycaster, true);\n      if (!planeIntersect)\n        return;\n      this.pointEnd.copy(planeIntersect.point).sub(this.worldPositionStart);\n      if (mode === \"translate\") {\n        this.offset.copy(this.pointEnd).sub(this.pointStart);\n        if (space === \"local\" && axis !== \"XYZ\") {\n          this.offset.applyQuaternion(this.worldQuaternionInv);\n        }\n        if (axis.indexOf(\"X\") === -1)\n          this.offset.x = 0;\n        if (axis.indexOf(\"Y\") === -1)\n          this.offset.y = 0;\n        if (axis.indexOf(\"Z\") === -1)\n          this.offset.z = 0;\n        if (space === \"local\" && axis !== \"XYZ\") {\n          this.offset.applyQuaternion(this.quaternionStart).divide(this.parentScale);\n        } else {\n          this.offset.applyQuaternion(this.parentQuaternionInv).divide(this.parentScale);\n        }\n        object.position.copy(this.offset).add(this.positionStart);\n        if (this.translationSnap) {\n          if (space === \"local\") {\n            object.position.applyQuaternion(this.tempQuaternion.copy(this.quaternionStart).invert());\n            if (axis.search(\"X\") !== -1) {\n              object.position.x = Math.round(object.position.x / this.translationSnap) * this.translationSnap;\n            }\n            if (axis.search(\"Y\") !== -1) {\n              object.position.y = Math.round(object.position.y / this.translationSnap) * this.translationSnap;\n            }\n            if (axis.search(\"Z\") !== -1) {\n              object.position.z = Math.round(object.position.z / this.translationSnap) * this.translationSnap;\n            }\n            object.position.applyQuaternion(this.quaternionStart);\n          }\n          if (space === \"world\") {\n            if (object.parent) {\n              object.position.add(this.tempVector.setFromMatrixPosition(object.parent.matrixWorld));\n            }\n            if (axis.search(\"X\") !== -1) {\n              object.position.x = Math.round(object.position.x / this.translationSnap) * this.translationSnap;\n            }\n            if (axis.search(\"Y\") !== -1) {\n              object.position.y = Math.round(object.position.y / this.translationSnap) * this.translationSnap;\n            }\n            if (axis.search(\"Z\") !== -1) {\n              object.position.z = Math.round(object.position.z / this.translationSnap) * this.translationSnap;\n            }\n            if (object.parent) {\n              object.position.sub(this.tempVector.setFromMatrixPosition(object.parent.matrixWorld));\n            }\n          }\n        }\n      } else if (mode === \"scale\") {\n        if (axis.search(\"XYZ\") !== -1) {\n          let d = this.pointEnd.length() / this.pointStart.length();\n          if (this.pointEnd.dot(this.pointStart) < 0)\n            d *= -1;\n          this.tempVector2.set(d, d, d);\n        } else {\n          this.tempVector.copy(this.pointStart);\n          this.tempVector2.copy(this.pointEnd);\n          this.tempVector.applyQuaternion(this.worldQuaternionInv);\n          this.tempVector2.applyQuaternion(this.worldQuaternionInv);\n          this.tempVector2.divide(this.tempVector);\n          if (axis.search(\"X\") === -1) {\n            this.tempVector2.x = 1;\n          }\n          if (axis.search(\"Y\") === -1) {\n            this.tempVector2.y = 1;\n          }\n          if (axis.search(\"Z\") === -1) {\n            this.tempVector2.z = 1;\n          }\n        }\n        object.scale.copy(this.scaleStart).multiply(this.tempVector2);\n        if (this.scaleSnap && this.object) {\n          if (axis.search(\"X\") !== -1) {\n            this.object.scale.x = Math.round(object.scale.x / this.scaleSnap) * this.scaleSnap || this.scaleSnap;\n          }\n          if (axis.search(\"Y\") !== -1) {\n            object.scale.y = Math.round(object.scale.y / this.scaleSnap) * this.scaleSnap || this.scaleSnap;\n          }\n          if (axis.search(\"Z\") !== -1) {\n            object.scale.z = Math.round(object.scale.z / this.scaleSnap) * this.scaleSnap || this.scaleSnap;\n          }\n        }\n      } else if (mode === \"rotate\") {\n        this.offset.copy(this.pointEnd).sub(this.pointStart);\n        const ROTATION_SPEED = 20 / this.worldPosition.distanceTo(this.tempVector.setFromMatrixPosition(this.camera.matrixWorld));\n        if (axis === \"E\") {\n          this.rotationAxis.copy(this.eye);\n          this.rotationAngle = this.pointEnd.angleTo(this.pointStart);\n          this.startNorm.copy(this.pointStart).normalize();\n          this.endNorm.copy(this.pointEnd).normalize();\n          this.rotationAngle *= this.endNorm.cross(this.startNorm).dot(this.eye) < 0 ? 1 : -1;\n        } else if (axis === \"XYZE\") {\n          this.rotationAxis.copy(this.offset).cross(this.eye).normalize();\n          this.rotationAngle = this.offset.dot(this.tempVector.copy(this.rotationAxis).cross(this.eye)) * ROTATION_SPEED;\n        } else if (axis === \"X\" || axis === \"Y\" || axis === \"Z\") {\n          this.rotationAxis.copy(this.unit[axis]);\n          this.tempVector.copy(this.unit[axis]);\n          if (space === \"local\") {\n            this.tempVector.applyQuaternion(this.worldQuaternion);\n          }\n          this.rotationAngle = this.offset.dot(this.tempVector.cross(this.eye).normalize()) * ROTATION_SPEED;\n        }\n        if (this.rotationSnap) {\n          this.rotationAngle = Math.round(this.rotationAngle / this.rotationSnap) * this.rotationSnap;\n        }\n        if (space === \"local\" && axis !== \"E\" && axis !== \"XYZE\") {\n          object.quaternion.copy(this.quaternionStart);\n          object.quaternion.multiply(this.tempQuaternion.setFromAxisAngle(this.rotationAxis, this.rotationAngle)).normalize();\n        } else {\n          this.rotationAxis.applyQuaternion(this.parentQuaternionInv);\n          object.quaternion.copy(this.tempQuaternion.setFromAxisAngle(this.rotationAxis, this.rotationAngle));\n          object.quaternion.multiply(this.quaternionStart).normalize();\n        }\n      }\n      this.dispatchEvent(this.changeEvent);\n      this.dispatchEvent(this.objectChangeEvent);\n    });\n    __publicField(this, \"pointerUp\", (pointer) => {\n      if (pointer.button !== 0)\n        return;\n      if (this.dragging && this.axis !== null) {\n        this.mouseUpEvent.mode = this.mode;\n        this.dispatchEvent(this.mouseUpEvent);\n      }\n      this.dragging = false;\n      this.axis = null;\n    });\n    __publicField(this, \"getPointer\", (event) => {\n      var _a;\n      if (this.domElement && ((_a = this.domElement.ownerDocument) == null ? void 0 : _a.pointerLockElement)) {\n        return {\n          x: 0,\n          y: 0,\n          button: event.button\n        };\n      } else {\n        const pointer = event.changedTouches ? event.changedTouches[0] : event;\n        const rect = this.domElement.getBoundingClientRect();\n        return {\n          x: (pointer.clientX - rect.left) / rect.width * 2 - 1,\n          y: -(pointer.clientY - rect.top) / rect.height * 2 + 1,\n          button: event.button\n        };\n      }\n    });\n    __publicField(this, \"onPointerHover\", (event) => {\n      if (!this.enabled)\n        return;\n      switch (event.pointerType) {\n        case \"mouse\":\n        case \"pen\":\n          this.pointerHover(this.getPointer(event));\n          break;\n      }\n    });\n    __publicField(this, \"onPointerDown\", (event) => {\n      if (!this.enabled || !this.domElement)\n        return;\n      this.domElement.style.touchAction = \"none\";\n      this.domElement.ownerDocument.addEventListener(\"pointermove\", this.onPointerMove);\n      this.pointerHover(this.getPointer(event));\n      this.pointerDown(this.getPointer(event));\n    });\n    __publicField(this, \"onPointerMove\", (event) => {\n      if (!this.enabled)\n        return;\n      this.pointerMove(this.getPointer(event));\n    });\n    __publicField(this, \"onPointerUp\", (event) => {\n      if (!this.enabled || !this.domElement)\n        return;\n      this.domElement.style.touchAction = \"\";\n      this.domElement.ownerDocument.removeEventListener(\"pointermove\", this.onPointerMove);\n      this.pointerUp(this.getPointer(event));\n    });\n    __publicField(this, \"getMode\", () => this.mode);\n    __publicField(this, \"setMode\", (mode) => {\n      this.mode = mode;\n    });\n    __publicField(this, \"setTranslationSnap\", (translationSnap) => {\n      this.translationSnap = translationSnap;\n    });\n    __publicField(this, \"setRotationSnap\", (rotationSnap) => {\n      this.rotationSnap = rotationSnap;\n    });\n    __publicField(this, \"setScaleSnap\", (scaleSnap) => {\n      this.scaleSnap = scaleSnap;\n    });\n    __publicField(this, \"setSize\", (size) => {\n      this.size = size;\n    });\n    __publicField(this, \"setSpace\", (space) => {\n      this.space = space;\n    });\n    __publicField(this, \"update\", () => {\n      console.warn(\n        \"THREE.TransformControls: update function has no more functionality and therefore has been deprecated.\"\n      );\n    });\n    __publicField(this, \"connect\", (domElement) => {\n      if (domElement === document) {\n        console.error(\n          'THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.'\n        );\n      }\n      this.domElement = domElement;\n      this.domElement.addEventListener(\"pointerdown\", this.onPointerDown);\n      this.domElement.addEventListener(\"pointermove\", this.onPointerHover);\n      this.domElement.ownerDocument.addEventListener(\"pointerup\", this.onPointerUp);\n    });\n    __publicField(this, \"dispose\", () => {\n      var _a, _b, _c, _d, _e, _f;\n      (_a = this.domElement) == null ? void 0 : _a.removeEventListener(\"pointerdown\", this.onPointerDown);\n      (_b = this.domElement) == null ? void 0 : _b.removeEventListener(\"pointermove\", this.onPointerHover);\n      (_d = (_c = this.domElement) == null ? void 0 : _c.ownerDocument) == null ? void 0 : _d.removeEventListener(\"pointermove\", this.onPointerMove);\n      (_f = (_e = this.domElement) == null ? void 0 : _e.ownerDocument) == null ? void 0 : _f.removeEventListener(\"pointerup\", this.onPointerUp);\n      this.traverse((child) => {\n        const mesh = child;\n        if (mesh.geometry) {\n          mesh.geometry.dispose();\n        }\n        if (mesh.material) {\n          mesh.material.dispose();\n        }\n      });\n    });\n    this.domElement = domElement;\n    this.camera = camera;\n    this.gizmo = new TransformControlsGizmo();\n    this.add(this.gizmo);\n    this.plane = new TransformControlsPlane();\n    this.add(this.plane);\n    const defineProperty = (propName, defaultValue) => {\n      let propValue = defaultValue;\n      Object.defineProperty(this, propName, {\n        get: function() {\n          return propValue !== void 0 ? propValue : defaultValue;\n        },\n        set: function(value) {\n          if (propValue !== value) {\n            propValue = value;\n            this.plane[propName] = value;\n            this.gizmo[propName] = value;\n            this.dispatchEvent({ type: propName + \"-changed\", value });\n            this.dispatchEvent(this.changeEvent);\n          }\n        }\n      });\n      this[propName] = defaultValue;\n      this.plane[propName] = defaultValue;\n      this.gizmo[propName] = defaultValue;\n    };\n    defineProperty(\"camera\", this.camera);\n    defineProperty(\"object\", this.object);\n    defineProperty(\"enabled\", this.enabled);\n    defineProperty(\"axis\", this.axis);\n    defineProperty(\"mode\", this.mode);\n    defineProperty(\"translationSnap\", this.translationSnap);\n    defineProperty(\"rotationSnap\", this.rotationSnap);\n    defineProperty(\"scaleSnap\", this.scaleSnap);\n    defineProperty(\"space\", this.space);\n    defineProperty(\"size\", this.size);\n    defineProperty(\"dragging\", this.dragging);\n    defineProperty(\"showX\", this.showX);\n    defineProperty(\"showY\", this.showY);\n    defineProperty(\"showZ\", this.showZ);\n    defineProperty(\"worldPosition\", this.worldPosition);\n    defineProperty(\"worldPositionStart\", this.worldPositionStart);\n    defineProperty(\"worldQuaternion\", this.worldQuaternion);\n    defineProperty(\"worldQuaternionStart\", this.worldQuaternionStart);\n    defineProperty(\"cameraPosition\", this.cameraPosition);\n    defineProperty(\"cameraQuaternion\", this.cameraQuaternion);\n    defineProperty(\"pointStart\", this.pointStart);\n    defineProperty(\"pointEnd\", this.pointEnd);\n    defineProperty(\"rotationAxis\", this.rotationAxis);\n    defineProperty(\"rotationAngle\", this.rotationAngle);\n    defineProperty(\"eye\", this.eye);\n    if (domElement !== void 0)\n      this.connect(domElement);\n  }\n}\nclass TransformControlsGizmo extends three__WEBPACK_IMPORTED_MODULE_0__.Object3D {\n  constructor() {\n    super();\n    __publicField(this, \"isTransformControlsGizmo\", true);\n    __publicField(this, \"type\", \"TransformControlsGizmo\");\n    __publicField(this, \"tempVector\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 0, 0));\n    __publicField(this, \"tempEuler\", new three__WEBPACK_IMPORTED_MODULE_0__.Euler());\n    __publicField(this, \"alignVector\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 1, 0));\n    __publicField(this, \"zeroVector\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 0, 0));\n    __publicField(this, \"lookAtMatrix\", new three__WEBPACK_IMPORTED_MODULE_0__.Matrix4());\n    __publicField(this, \"tempQuaternion\", new three__WEBPACK_IMPORTED_MODULE_0__.Quaternion());\n    __publicField(this, \"tempQuaternion2\", new three__WEBPACK_IMPORTED_MODULE_0__.Quaternion());\n    __publicField(this, \"identityQuaternion\", new three__WEBPACK_IMPORTED_MODULE_0__.Quaternion());\n    __publicField(this, \"unitX\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3(1, 0, 0));\n    __publicField(this, \"unitY\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 1, 0));\n    __publicField(this, \"unitZ\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 0, 1));\n    __publicField(this, \"gizmo\");\n    __publicField(this, \"picker\");\n    __publicField(this, \"helper\");\n    // these are set from parent class TransformControls\n    __publicField(this, \"rotationAxis\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3());\n    __publicField(this, \"cameraPosition\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3());\n    __publicField(this, \"worldPositionStart\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3());\n    __publicField(this, \"worldQuaternionStart\", new three__WEBPACK_IMPORTED_MODULE_0__.Quaternion());\n    __publicField(this, \"worldPosition\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3());\n    __publicField(this, \"worldQuaternion\", new three__WEBPACK_IMPORTED_MODULE_0__.Quaternion());\n    __publicField(this, \"eye\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3());\n    __publicField(this, \"camera\", null);\n    __publicField(this, \"enabled\", true);\n    __publicField(this, \"axis\", null);\n    __publicField(this, \"mode\", \"translate\");\n    __publicField(this, \"space\", \"world\");\n    __publicField(this, \"size\", 1);\n    __publicField(this, \"dragging\", false);\n    __publicField(this, \"showX\", true);\n    __publicField(this, \"showY\", true);\n    __publicField(this, \"showZ\", true);\n    // updateMatrixWorld will update transformations and appearance of individual handles\n    __publicField(this, \"updateMatrixWorld\", () => {\n      let space = this.space;\n      if (this.mode === \"scale\") {\n        space = \"local\";\n      }\n      const quaternion = space === \"local\" ? this.worldQuaternion : this.identityQuaternion;\n      this.gizmo[\"translate\"].visible = this.mode === \"translate\";\n      this.gizmo[\"rotate\"].visible = this.mode === \"rotate\";\n      this.gizmo[\"scale\"].visible = this.mode === \"scale\";\n      this.helper[\"translate\"].visible = this.mode === \"translate\";\n      this.helper[\"rotate\"].visible = this.mode === \"rotate\";\n      this.helper[\"scale\"].visible = this.mode === \"scale\";\n      let handles = [];\n      handles = handles.concat(this.picker[this.mode].children);\n      handles = handles.concat(this.gizmo[this.mode].children);\n      handles = handles.concat(this.helper[this.mode].children);\n      for (let i = 0; i < handles.length; i++) {\n        const handle = handles[i];\n        handle.visible = true;\n        handle.rotation.set(0, 0, 0);\n        handle.position.copy(this.worldPosition);\n        let factor;\n        if (this.camera.isOrthographicCamera) {\n          factor = (this.camera.top - this.camera.bottom) / this.camera.zoom;\n        } else {\n          factor = this.worldPosition.distanceTo(this.cameraPosition) * Math.min(1.9 * Math.tan(Math.PI * this.camera.fov / 360) / this.camera.zoom, 7);\n        }\n        handle.scale.set(1, 1, 1).multiplyScalar(factor * this.size / 7);\n        if (handle.tag === \"helper\") {\n          handle.visible = false;\n          if (handle.name === \"AXIS\") {\n            handle.position.copy(this.worldPositionStart);\n            handle.visible = !!this.axis;\n            if (this.axis === \"X\") {\n              this.tempQuaternion.setFromEuler(this.tempEuler.set(0, 0, 0));\n              handle.quaternion.copy(quaternion).multiply(this.tempQuaternion);\n              if (Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(quaternion).dot(this.eye)) > 0.9) {\n                handle.visible = false;\n              }\n            }\n            if (this.axis === \"Y\") {\n              this.tempQuaternion.setFromEuler(this.tempEuler.set(0, 0, Math.PI / 2));\n              handle.quaternion.copy(quaternion).multiply(this.tempQuaternion);\n              if (Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(quaternion).dot(this.eye)) > 0.9) {\n                handle.visible = false;\n              }\n            }\n            if (this.axis === \"Z\") {\n              this.tempQuaternion.setFromEuler(this.tempEuler.set(0, Math.PI / 2, 0));\n              handle.quaternion.copy(quaternion).multiply(this.tempQuaternion);\n              if (Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(quaternion).dot(this.eye)) > 0.9) {\n                handle.visible = false;\n              }\n            }\n            if (this.axis === \"XYZE\") {\n              this.tempQuaternion.setFromEuler(this.tempEuler.set(0, Math.PI / 2, 0));\n              this.alignVector.copy(this.rotationAxis);\n              handle.quaternion.setFromRotationMatrix(\n                this.lookAtMatrix.lookAt(this.zeroVector, this.alignVector, this.unitY)\n              );\n              handle.quaternion.multiply(this.tempQuaternion);\n              handle.visible = this.dragging;\n            }\n            if (this.axis === \"E\") {\n              handle.visible = false;\n            }\n          } else if (handle.name === \"START\") {\n            handle.position.copy(this.worldPositionStart);\n            handle.visible = this.dragging;\n          } else if (handle.name === \"END\") {\n            handle.position.copy(this.worldPosition);\n            handle.visible = this.dragging;\n          } else if (handle.name === \"DELTA\") {\n            handle.position.copy(this.worldPositionStart);\n            handle.quaternion.copy(this.worldQuaternionStart);\n            this.tempVector.set(1e-10, 1e-10, 1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1);\n            this.tempVector.applyQuaternion(this.worldQuaternionStart.clone().invert());\n            handle.scale.copy(this.tempVector);\n            handle.visible = this.dragging;\n          } else {\n            handle.quaternion.copy(quaternion);\n            if (this.dragging) {\n              handle.position.copy(this.worldPositionStart);\n            } else {\n              handle.position.copy(this.worldPosition);\n            }\n            if (this.axis) {\n              handle.visible = this.axis.search(handle.name) !== -1;\n            }\n          }\n          continue;\n        }\n        handle.quaternion.copy(quaternion);\n        if (this.mode === \"translate\" || this.mode === \"scale\") {\n          const AXIS_HIDE_TRESHOLD = 0.99;\n          const PLANE_HIDE_TRESHOLD = 0.2;\n          const AXIS_FLIP_TRESHOLD = 0;\n          if (handle.name === \"X\" || handle.name === \"XYZX\") {\n            if (Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(quaternion).dot(this.eye)) > AXIS_HIDE_TRESHOLD) {\n              handle.scale.set(1e-10, 1e-10, 1e-10);\n              handle.visible = false;\n            }\n          }\n          if (handle.name === \"Y\" || handle.name === \"XYZY\") {\n            if (Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(quaternion).dot(this.eye)) > AXIS_HIDE_TRESHOLD) {\n              handle.scale.set(1e-10, 1e-10, 1e-10);\n              handle.visible = false;\n            }\n          }\n          if (handle.name === \"Z\" || handle.name === \"XYZZ\") {\n            if (Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(quaternion).dot(this.eye)) > AXIS_HIDE_TRESHOLD) {\n              handle.scale.set(1e-10, 1e-10, 1e-10);\n              handle.visible = false;\n            }\n          }\n          if (handle.name === \"XY\") {\n            if (Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(quaternion).dot(this.eye)) < PLANE_HIDE_TRESHOLD) {\n              handle.scale.set(1e-10, 1e-10, 1e-10);\n              handle.visible = false;\n            }\n          }\n          if (handle.name === \"YZ\") {\n            if (Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(quaternion).dot(this.eye)) < PLANE_HIDE_TRESHOLD) {\n              handle.scale.set(1e-10, 1e-10, 1e-10);\n              handle.visible = false;\n            }\n          }\n          if (handle.name === \"XZ\") {\n            if (Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(quaternion).dot(this.eye)) < PLANE_HIDE_TRESHOLD) {\n              handle.scale.set(1e-10, 1e-10, 1e-10);\n              handle.visible = false;\n            }\n          }\n          if (handle.name.search(\"X\") !== -1) {\n            if (this.alignVector.copy(this.unitX).applyQuaternion(quaternion).dot(this.eye) < AXIS_FLIP_TRESHOLD) {\n              if (handle.tag === \"fwd\") {\n                handle.visible = false;\n              } else {\n                handle.scale.x *= -1;\n              }\n            } else if (handle.tag === \"bwd\") {\n              handle.visible = false;\n            }\n          }\n          if (handle.name.search(\"Y\") !== -1) {\n            if (this.alignVector.copy(this.unitY).applyQuaternion(quaternion).dot(this.eye) < AXIS_FLIP_TRESHOLD) {\n              if (handle.tag === \"fwd\") {\n                handle.visible = false;\n              } else {\n                handle.scale.y *= -1;\n              }\n            } else if (handle.tag === \"bwd\") {\n              handle.visible = false;\n            }\n          }\n          if (handle.name.search(\"Z\") !== -1) {\n            if (this.alignVector.copy(this.unitZ).applyQuaternion(quaternion).dot(this.eye) < AXIS_FLIP_TRESHOLD) {\n              if (handle.tag === \"fwd\") {\n                handle.visible = false;\n              } else {\n                handle.scale.z *= -1;\n              }\n            } else if (handle.tag === \"bwd\") {\n              handle.visible = false;\n            }\n          }\n        } else if (this.mode === \"rotate\") {\n          this.tempQuaternion2.copy(quaternion);\n          this.alignVector.copy(this.eye).applyQuaternion(this.tempQuaternion.copy(quaternion).invert());\n          if (handle.name.search(\"E\") !== -1) {\n            handle.quaternion.setFromRotationMatrix(this.lookAtMatrix.lookAt(this.eye, this.zeroVector, this.unitY));\n          }\n          if (handle.name === \"X\") {\n            this.tempQuaternion.setFromAxisAngle(this.unitX, Math.atan2(-this.alignVector.y, this.alignVector.z));\n            this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2, this.tempQuaternion);\n            handle.quaternion.copy(this.tempQuaternion);\n          }\n          if (handle.name === \"Y\") {\n            this.tempQuaternion.setFromAxisAngle(this.unitY, Math.atan2(this.alignVector.x, this.alignVector.z));\n            this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2, this.tempQuaternion);\n            handle.quaternion.copy(this.tempQuaternion);\n          }\n          if (handle.name === \"Z\") {\n            this.tempQuaternion.setFromAxisAngle(this.unitZ, Math.atan2(this.alignVector.y, this.alignVector.x));\n            this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2, this.tempQuaternion);\n            handle.quaternion.copy(this.tempQuaternion);\n          }\n        }\n        handle.visible = handle.visible && (handle.name.indexOf(\"X\") === -1 || this.showX);\n        handle.visible = handle.visible && (handle.name.indexOf(\"Y\") === -1 || this.showY);\n        handle.visible = handle.visible && (handle.name.indexOf(\"Z\") === -1 || this.showZ);\n        handle.visible = handle.visible && (handle.name.indexOf(\"E\") === -1 || this.showX && this.showY && this.showZ);\n        handle.material.tempOpacity = handle.material.tempOpacity || handle.material.opacity;\n        handle.material.tempColor = handle.material.tempColor || handle.material.color.clone();\n        handle.material.color.copy(handle.material.tempColor);\n        handle.material.opacity = handle.material.tempOpacity;\n        if (!this.enabled) {\n          handle.material.opacity *= 0.5;\n          handle.material.color.lerp(new three__WEBPACK_IMPORTED_MODULE_0__.Color(1, 1, 1), 0.5);\n        } else if (this.axis) {\n          if (handle.name === this.axis) {\n            handle.material.opacity = 1;\n            handle.material.color.lerp(new three__WEBPACK_IMPORTED_MODULE_0__.Color(1, 1, 1), 0.5);\n          } else if (this.axis.split(\"\").some(function(a) {\n            return handle.name === a;\n          })) {\n            handle.material.opacity = 1;\n            handle.material.color.lerp(new three__WEBPACK_IMPORTED_MODULE_0__.Color(1, 1, 1), 0.5);\n          } else {\n            handle.material.opacity *= 0.25;\n            handle.material.color.lerp(new three__WEBPACK_IMPORTED_MODULE_0__.Color(1, 1, 1), 0.5);\n          }\n        }\n      }\n      super.updateMatrixWorld();\n    });\n    const gizmoMaterial = new three__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial({\n      depthTest: false,\n      depthWrite: false,\n      transparent: true,\n      side: three__WEBPACK_IMPORTED_MODULE_0__.DoubleSide,\n      fog: false,\n      toneMapped: false\n    });\n    const gizmoLineMaterial = new three__WEBPACK_IMPORTED_MODULE_0__.LineBasicMaterial({\n      depthTest: false,\n      depthWrite: false,\n      transparent: true,\n      linewidth: 1,\n      fog: false,\n      toneMapped: false\n    });\n    const matInvisible = gizmoMaterial.clone();\n    matInvisible.opacity = 0.15;\n    const matHelper = gizmoMaterial.clone();\n    matHelper.opacity = 0.33;\n    const matRed = gizmoMaterial.clone();\n    matRed.color.set(16711680);\n    const matGreen = gizmoMaterial.clone();\n    matGreen.color.set(65280);\n    const matBlue = gizmoMaterial.clone();\n    matBlue.color.set(255);\n    const matWhiteTransparent = gizmoMaterial.clone();\n    matWhiteTransparent.opacity = 0.25;\n    const matYellowTransparent = matWhiteTransparent.clone();\n    matYellowTransparent.color.set(16776960);\n    const matCyanTransparent = matWhiteTransparent.clone();\n    matCyanTransparent.color.set(65535);\n    const matMagentaTransparent = matWhiteTransparent.clone();\n    matMagentaTransparent.color.set(16711935);\n    const matYellow = gizmoMaterial.clone();\n    matYellow.color.set(16776960);\n    const matLineRed = gizmoLineMaterial.clone();\n    matLineRed.color.set(16711680);\n    const matLineGreen = gizmoLineMaterial.clone();\n    matLineGreen.color.set(65280);\n    const matLineBlue = gizmoLineMaterial.clone();\n    matLineBlue.color.set(255);\n    const matLineCyan = gizmoLineMaterial.clone();\n    matLineCyan.color.set(65535);\n    const matLineMagenta = gizmoLineMaterial.clone();\n    matLineMagenta.color.set(16711935);\n    const matLineYellow = gizmoLineMaterial.clone();\n    matLineYellow.color.set(16776960);\n    const matLineGray = gizmoLineMaterial.clone();\n    matLineGray.color.set(7895160);\n    const matLineYellowTransparent = matLineYellow.clone();\n    matLineYellowTransparent.opacity = 0.25;\n    const arrowGeometry = new three__WEBPACK_IMPORTED_MODULE_0__.CylinderGeometry(0, 0.05, 0.2, 12, 1, false);\n    const scaleHandleGeometry = new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry(0.125, 0.125, 0.125);\n    const lineGeometry = new three__WEBPACK_IMPORTED_MODULE_0__.BufferGeometry();\n    lineGeometry.setAttribute(\"position\", new three__WEBPACK_IMPORTED_MODULE_0__.Float32BufferAttribute([0, 0, 0, 1, 0, 0], 3));\n    const CircleGeometry = (radius, arc) => {\n      const geometry = new three__WEBPACK_IMPORTED_MODULE_0__.BufferGeometry();\n      const vertices = [];\n      for (let i = 0; i <= 64 * arc; ++i) {\n        vertices.push(0, Math.cos(i / 32 * Math.PI) * radius, Math.sin(i / 32 * Math.PI) * radius);\n      }\n      geometry.setAttribute(\"position\", new three__WEBPACK_IMPORTED_MODULE_0__.Float32BufferAttribute(vertices, 3));\n      return geometry;\n    };\n    const TranslateHelperGeometry = () => {\n      const geometry = new three__WEBPACK_IMPORTED_MODULE_0__.BufferGeometry();\n      geometry.setAttribute(\"position\", new three__WEBPACK_IMPORTED_MODULE_0__.Float32BufferAttribute([0, 0, 0, 1, 1, 1], 3));\n      return geometry;\n    };\n    const gizmoTranslate = {\n      X: [\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(arrowGeometry, matRed), [1, 0, 0], [0, 0, -Math.PI / 2], null, \"fwd\"],\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(arrowGeometry, matRed), [1, 0, 0], [0, 0, Math.PI / 2], null, \"bwd\"],\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Line(lineGeometry, matLineRed)]\n      ],\n      Y: [\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(arrowGeometry, matGreen), [0, 1, 0], null, null, \"fwd\"],\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(arrowGeometry, matGreen), [0, 1, 0], [Math.PI, 0, 0], null, \"bwd\"],\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Line(lineGeometry, matLineGreen), null, [0, 0, Math.PI / 2]]\n      ],\n      Z: [\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(arrowGeometry, matBlue), [0, 0, 1], [Math.PI / 2, 0, 0], null, \"fwd\"],\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(arrowGeometry, matBlue), [0, 0, 1], [-Math.PI / 2, 0, 0], null, \"bwd\"],\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Line(lineGeometry, matLineBlue), null, [0, -Math.PI / 2, 0]]\n      ],\n      XYZ: [[new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.OctahedronGeometry(0.1, 0), matWhiteTransparent.clone()), [0, 0, 0], [0, 0, 0]]],\n      XY: [\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.PlaneGeometry(0.295, 0.295), matYellowTransparent.clone()), [0.15, 0.15, 0]],\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Line(lineGeometry, matLineYellow), [0.18, 0.3, 0], null, [0.125, 1, 1]],\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Line(lineGeometry, matLineYellow), [0.3, 0.18, 0], [0, 0, Math.PI / 2], [0.125, 1, 1]]\n      ],\n      YZ: [\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.PlaneGeometry(0.295, 0.295), matCyanTransparent.clone()), [0, 0.15, 0.15], [0, Math.PI / 2, 0]],\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Line(lineGeometry, matLineCyan), [0, 0.18, 0.3], [0, 0, Math.PI / 2], [0.125, 1, 1]],\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Line(lineGeometry, matLineCyan), [0, 0.3, 0.18], [0, -Math.PI / 2, 0], [0.125, 1, 1]]\n      ],\n      XZ: [\n        [\n          new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.PlaneGeometry(0.295, 0.295), matMagentaTransparent.clone()),\n          [0.15, 0, 0.15],\n          [-Math.PI / 2, 0, 0]\n        ],\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Line(lineGeometry, matLineMagenta), [0.18, 0, 0.3], null, [0.125, 1, 1]],\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Line(lineGeometry, matLineMagenta), [0.3, 0, 0.18], [0, -Math.PI / 2, 0], [0.125, 1, 1]]\n      ]\n    };\n    const pickerTranslate = {\n      X: [[new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.CylinderGeometry(0.2, 0, 1, 4, 1, false), matInvisible), [0.6, 0, 0], [0, 0, -Math.PI / 2]]],\n      Y: [[new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.CylinderGeometry(0.2, 0, 1, 4, 1, false), matInvisible), [0, 0.6, 0]]],\n      Z: [[new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.CylinderGeometry(0.2, 0, 1, 4, 1, false), matInvisible), [0, 0, 0.6], [Math.PI / 2, 0, 0]]],\n      XYZ: [[new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.OctahedronGeometry(0.2, 0), matInvisible)]],\n      XY: [[new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.PlaneGeometry(0.4, 0.4), matInvisible), [0.2, 0.2, 0]]],\n      YZ: [[new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.PlaneGeometry(0.4, 0.4), matInvisible), [0, 0.2, 0.2], [0, Math.PI / 2, 0]]],\n      XZ: [[new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.PlaneGeometry(0.4, 0.4), matInvisible), [0.2, 0, 0.2], [-Math.PI / 2, 0, 0]]]\n    };\n    const helperTranslate = {\n      START: [[new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.OctahedronGeometry(0.01, 2), matHelper), null, null, null, \"helper\"]],\n      END: [[new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.OctahedronGeometry(0.01, 2), matHelper), null, null, null, \"helper\"]],\n      DELTA: [[new three__WEBPACK_IMPORTED_MODULE_0__.Line(TranslateHelperGeometry(), matHelper), null, null, null, \"helper\"]],\n      X: [[new three__WEBPACK_IMPORTED_MODULE_0__.Line(lineGeometry, matHelper.clone()), [-1e3, 0, 0], null, [1e6, 1, 1], \"helper\"]],\n      Y: [[new three__WEBPACK_IMPORTED_MODULE_0__.Line(lineGeometry, matHelper.clone()), [0, -1e3, 0], [0, 0, Math.PI / 2], [1e6, 1, 1], \"helper\"]],\n      Z: [[new three__WEBPACK_IMPORTED_MODULE_0__.Line(lineGeometry, matHelper.clone()), [0, 0, -1e3], [0, -Math.PI / 2, 0], [1e6, 1, 1], \"helper\"]]\n    };\n    const gizmoRotate = {\n      X: [\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Line(CircleGeometry(1, 0.5), matLineRed)],\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.OctahedronGeometry(0.04, 0), matRed), [0, 0, 0.99], null, [1, 3, 1]]\n      ],\n      Y: [\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Line(CircleGeometry(1, 0.5), matLineGreen), null, [0, 0, -Math.PI / 2]],\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.OctahedronGeometry(0.04, 0), matGreen), [0, 0, 0.99], null, [3, 1, 1]]\n      ],\n      Z: [\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Line(CircleGeometry(1, 0.5), matLineBlue), null, [0, Math.PI / 2, 0]],\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.OctahedronGeometry(0.04, 0), matBlue), [0.99, 0, 0], null, [1, 3, 1]]\n      ],\n      E: [\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Line(CircleGeometry(1.25, 1), matLineYellowTransparent), null, [0, Math.PI / 2, 0]],\n        [\n          new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.CylinderGeometry(0.03, 0, 0.15, 4, 1, false), matLineYellowTransparent),\n          [1.17, 0, 0],\n          [0, 0, -Math.PI / 2],\n          [1, 1, 1e-3]\n        ],\n        [\n          new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.CylinderGeometry(0.03, 0, 0.15, 4, 1, false), matLineYellowTransparent),\n          [-1.17, 0, 0],\n          [0, 0, Math.PI / 2],\n          [1, 1, 1e-3]\n        ],\n        [\n          new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.CylinderGeometry(0.03, 0, 0.15, 4, 1, false), matLineYellowTransparent),\n          [0, -1.17, 0],\n          [Math.PI, 0, 0],\n          [1, 1, 1e-3]\n        ],\n        [\n          new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.CylinderGeometry(0.03, 0, 0.15, 4, 1, false), matLineYellowTransparent),\n          [0, 1.17, 0],\n          [0, 0, 0],\n          [1, 1, 1e-3]\n        ]\n      ],\n      XYZE: [[new three__WEBPACK_IMPORTED_MODULE_0__.Line(CircleGeometry(1, 1), matLineGray), null, [0, Math.PI / 2, 0]]]\n    };\n    const helperRotate = {\n      AXIS: [[new three__WEBPACK_IMPORTED_MODULE_0__.Line(lineGeometry, matHelper.clone()), [-1e3, 0, 0], null, [1e6, 1, 1], \"helper\"]]\n    };\n    const pickerRotate = {\n      X: [[new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.TorusGeometry(1, 0.1, 4, 24), matInvisible), [0, 0, 0], [0, -Math.PI / 2, -Math.PI / 2]]],\n      Y: [[new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.TorusGeometry(1, 0.1, 4, 24), matInvisible), [0, 0, 0], [Math.PI / 2, 0, 0]]],\n      Z: [[new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.TorusGeometry(1, 0.1, 4, 24), matInvisible), [0, 0, 0], [0, 0, -Math.PI / 2]]],\n      E: [[new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.TorusGeometry(1.25, 0.1, 2, 24), matInvisible)]],\n      XYZE: [[new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.SphereGeometry(0.7, 10, 8), matInvisible)]]\n    };\n    const gizmoScale = {\n      X: [\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(scaleHandleGeometry, matRed), [0.8, 0, 0], [0, 0, -Math.PI / 2]],\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Line(lineGeometry, matLineRed), null, null, [0.8, 1, 1]]\n      ],\n      Y: [\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(scaleHandleGeometry, matGreen), [0, 0.8, 0]],\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Line(lineGeometry, matLineGreen), null, [0, 0, Math.PI / 2], [0.8, 1, 1]]\n      ],\n      Z: [\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(scaleHandleGeometry, matBlue), [0, 0, 0.8], [Math.PI / 2, 0, 0]],\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Line(lineGeometry, matLineBlue), null, [0, -Math.PI / 2, 0], [0.8, 1, 1]]\n      ],\n      XY: [\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(scaleHandleGeometry, matYellowTransparent), [0.85, 0.85, 0], null, [2, 2, 0.2]],\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Line(lineGeometry, matLineYellow), [0.855, 0.98, 0], null, [0.125, 1, 1]],\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Line(lineGeometry, matLineYellow), [0.98, 0.855, 0], [0, 0, Math.PI / 2], [0.125, 1, 1]]\n      ],\n      YZ: [\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(scaleHandleGeometry, matCyanTransparent), [0, 0.85, 0.85], null, [0.2, 2, 2]],\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Line(lineGeometry, matLineCyan), [0, 0.855, 0.98], [0, 0, Math.PI / 2], [0.125, 1, 1]],\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Line(lineGeometry, matLineCyan), [0, 0.98, 0.855], [0, -Math.PI / 2, 0], [0.125, 1, 1]]\n      ],\n      XZ: [\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(scaleHandleGeometry, matMagentaTransparent), [0.85, 0, 0.85], null, [2, 0.2, 2]],\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Line(lineGeometry, matLineMagenta), [0.855, 0, 0.98], null, [0.125, 1, 1]],\n        [new three__WEBPACK_IMPORTED_MODULE_0__.Line(lineGeometry, matLineMagenta), [0.98, 0, 0.855], [0, -Math.PI / 2, 0], [0.125, 1, 1]]\n      ],\n      XYZX: [[new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry(0.125, 0.125, 0.125), matWhiteTransparent.clone()), [1.1, 0, 0]]],\n      XYZY: [[new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry(0.125, 0.125, 0.125), matWhiteTransparent.clone()), [0, 1.1, 0]]],\n      XYZZ: [[new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry(0.125, 0.125, 0.125), matWhiteTransparent.clone()), [0, 0, 1.1]]]\n    };\n    const pickerScale = {\n      X: [[new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.CylinderGeometry(0.2, 0, 0.8, 4, 1, false), matInvisible), [0.5, 0, 0], [0, 0, -Math.PI / 2]]],\n      Y: [[new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.CylinderGeometry(0.2, 0, 0.8, 4, 1, false), matInvisible), [0, 0.5, 0]]],\n      Z: [[new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.CylinderGeometry(0.2, 0, 0.8, 4, 1, false), matInvisible), [0, 0, 0.5], [Math.PI / 2, 0, 0]]],\n      XY: [[new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(scaleHandleGeometry, matInvisible), [0.85, 0.85, 0], null, [3, 3, 0.2]]],\n      YZ: [[new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(scaleHandleGeometry, matInvisible), [0, 0.85, 0.85], null, [0.2, 3, 3]]],\n      XZ: [[new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(scaleHandleGeometry, matInvisible), [0.85, 0, 0.85], null, [3, 0.2, 3]]],\n      XYZX: [[new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry(0.2, 0.2, 0.2), matInvisible), [1.1, 0, 0]]],\n      XYZY: [[new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry(0.2, 0.2, 0.2), matInvisible), [0, 1.1, 0]]],\n      XYZZ: [[new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry(0.2, 0.2, 0.2), matInvisible), [0, 0, 1.1]]]\n    };\n    const helperScale = {\n      X: [[new three__WEBPACK_IMPORTED_MODULE_0__.Line(lineGeometry, matHelper.clone()), [-1e3, 0, 0], null, [1e6, 1, 1], \"helper\"]],\n      Y: [[new three__WEBPACK_IMPORTED_MODULE_0__.Line(lineGeometry, matHelper.clone()), [0, -1e3, 0], [0, 0, Math.PI / 2], [1e6, 1, 1], \"helper\"]],\n      Z: [[new three__WEBPACK_IMPORTED_MODULE_0__.Line(lineGeometry, matHelper.clone()), [0, 0, -1e3], [0, -Math.PI / 2, 0], [1e6, 1, 1], \"helper\"]]\n    };\n    const setupGizmo = (gizmoMap) => {\n      const gizmo = new three__WEBPACK_IMPORTED_MODULE_0__.Object3D();\n      for (let name in gizmoMap) {\n        for (let i = gizmoMap[name].length; i--; ) {\n          const object = gizmoMap[name][i][0].clone();\n          const position = gizmoMap[name][i][1];\n          const rotation = gizmoMap[name][i][2];\n          const scale = gizmoMap[name][i][3];\n          const tag = gizmoMap[name][i][4];\n          object.name = name;\n          object.tag = tag;\n          if (position) {\n            object.position.set(position[0], position[1], position[2]);\n          }\n          if (rotation) {\n            object.rotation.set(rotation[0], rotation[1], rotation[2]);\n          }\n          if (scale) {\n            object.scale.set(scale[0], scale[1], scale[2]);\n          }\n          object.updateMatrix();\n          const tempGeometry = object.geometry.clone();\n          tempGeometry.applyMatrix4(object.matrix);\n          object.geometry = tempGeometry;\n          object.renderOrder = Infinity;\n          object.position.set(0, 0, 0);\n          object.rotation.set(0, 0, 0);\n          object.scale.set(1, 1, 1);\n          gizmo.add(object);\n        }\n      }\n      return gizmo;\n    };\n    this.gizmo = {};\n    this.picker = {};\n    this.helper = {};\n    this.add(this.gizmo[\"translate\"] = setupGizmo(gizmoTranslate));\n    this.add(this.gizmo[\"rotate\"] = setupGizmo(gizmoRotate));\n    this.add(this.gizmo[\"scale\"] = setupGizmo(gizmoScale));\n    this.add(this.picker[\"translate\"] = setupGizmo(pickerTranslate));\n    this.add(this.picker[\"rotate\"] = setupGizmo(pickerRotate));\n    this.add(this.picker[\"scale\"] = setupGizmo(pickerScale));\n    this.add(this.helper[\"translate\"] = setupGizmo(helperTranslate));\n    this.add(this.helper[\"rotate\"] = setupGizmo(helperRotate));\n    this.add(this.helper[\"scale\"] = setupGizmo(helperScale));\n    this.picker[\"translate\"].visible = false;\n    this.picker[\"rotate\"].visible = false;\n    this.picker[\"scale\"].visible = false;\n  }\n}\nclass TransformControlsPlane extends three__WEBPACK_IMPORTED_MODULE_0__.Mesh {\n  constructor() {\n    super(\n      new three__WEBPACK_IMPORTED_MODULE_0__.PlaneGeometry(1e5, 1e5, 2, 2),\n      new three__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial({\n        visible: false,\n        wireframe: true,\n        side: three__WEBPACK_IMPORTED_MODULE_0__.DoubleSide,\n        transparent: true,\n        opacity: 0.1,\n        toneMapped: false\n      })\n    );\n    __publicField(this, \"isTransformControlsPlane\", true);\n    __publicField(this, \"type\", \"TransformControlsPlane\");\n    __publicField(this, \"unitX\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3(1, 0, 0));\n    __publicField(this, \"unitY\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 1, 0));\n    __publicField(this, \"unitZ\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 0, 1));\n    __publicField(this, \"tempVector\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3());\n    __publicField(this, \"dirVector\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3());\n    __publicField(this, \"alignVector\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3());\n    __publicField(this, \"tempMatrix\", new three__WEBPACK_IMPORTED_MODULE_0__.Matrix4());\n    __publicField(this, \"identityQuaternion\", new three__WEBPACK_IMPORTED_MODULE_0__.Quaternion());\n    // these are set from parent class TransformControls\n    __publicField(this, \"cameraQuaternion\", new three__WEBPACK_IMPORTED_MODULE_0__.Quaternion());\n    __publicField(this, \"worldPosition\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3());\n    __publicField(this, \"worldQuaternion\", new three__WEBPACK_IMPORTED_MODULE_0__.Quaternion());\n    __publicField(this, \"eye\", new three__WEBPACK_IMPORTED_MODULE_0__.Vector3());\n    __publicField(this, \"axis\", null);\n    __publicField(this, \"mode\", \"translate\");\n    __publicField(this, \"space\", \"world\");\n    __publicField(this, \"updateMatrixWorld\", () => {\n      let space = this.space;\n      this.position.copy(this.worldPosition);\n      if (this.mode === \"scale\")\n        space = \"local\";\n      this.unitX.set(1, 0, 0).applyQuaternion(space === \"local\" ? this.worldQuaternion : this.identityQuaternion);\n      this.unitY.set(0, 1, 0).applyQuaternion(space === \"local\" ? this.worldQuaternion : this.identityQuaternion);\n      this.unitZ.set(0, 0, 1).applyQuaternion(space === \"local\" ? this.worldQuaternion : this.identityQuaternion);\n      this.alignVector.copy(this.unitY);\n      switch (this.mode) {\n        case \"translate\":\n        case \"scale\":\n          switch (this.axis) {\n            case \"X\":\n              this.alignVector.copy(this.eye).cross(this.unitX);\n              this.dirVector.copy(this.unitX).cross(this.alignVector);\n              break;\n            case \"Y\":\n              this.alignVector.copy(this.eye).cross(this.unitY);\n              this.dirVector.copy(this.unitY).cross(this.alignVector);\n              break;\n            case \"Z\":\n              this.alignVector.copy(this.eye).cross(this.unitZ);\n              this.dirVector.copy(this.unitZ).cross(this.alignVector);\n              break;\n            case \"XY\":\n              this.dirVector.copy(this.unitZ);\n              break;\n            case \"YZ\":\n              this.dirVector.copy(this.unitX);\n              break;\n            case \"XZ\":\n              this.alignVector.copy(this.unitZ);\n              this.dirVector.copy(this.unitY);\n              break;\n            case \"XYZ\":\n            case \"E\":\n              this.dirVector.set(0, 0, 0);\n              break;\n          }\n          break;\n        case \"rotate\":\n        default:\n          this.dirVector.set(0, 0, 0);\n      }\n      if (this.dirVector.length() === 0) {\n        this.quaternion.copy(this.cameraQuaternion);\n      } else {\n        this.tempMatrix.lookAt(this.tempVector.set(0, 0, 0), this.dirVector, this.alignVector);\n        this.quaternion.setFromRotationMatrix(this.tempMatrix);\n      }\n      super.updateMatrixWorld();\n    });\n  }\n}\n\n//# sourceMappingURL=TransformControls.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy90aHJlZS1zdGRsaWIvY29udHJvbHMvVHJhbnNmb3JtQ29udHJvbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ0EsOEVBQThFLDZEQUE2RDtBQUMzSTtBQUNBO0FBQ0E7QUFDQTtBQUMrUjtBQUMvUixnQ0FBZ0MsMkNBQVE7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5Qyw0Q0FBUztBQUNsRDtBQUNBO0FBQ0EsMENBQTBDLDBDQUFPO0FBQ2pELDJDQUEyQywwQ0FBTztBQUNsRCw4Q0FBOEMsNkNBQVU7QUFDeEQ7QUFDQSxhQUFhLDBDQUFPO0FBQ3BCLGFBQWEsMENBQU87QUFDcEIsYUFBYSwwQ0FBTztBQUNwQixLQUFLO0FBQ0wsMENBQTBDLDBDQUFPO0FBQ2pELHdDQUF3QywwQ0FBTztBQUMvQyxzQ0FBc0MsMENBQU87QUFDN0MsNENBQTRDLDBDQUFPO0FBQ25ELHlDQUF5QywwQ0FBTztBQUNoRCx1Q0FBdUMsMENBQU87QUFDOUM7QUFDQSw4Q0FBOEMsMENBQU87QUFDckQsZ0RBQWdELDZDQUFVO0FBQzFELDJDQUEyQywwQ0FBTztBQUNsRCw4Q0FBOEMsMENBQU87QUFDckQsZ0RBQWdELDZDQUFVO0FBQzFELG1EQUFtRCw2Q0FBVTtBQUM3RCwyQ0FBMkMsMENBQU87QUFDbEQsa0RBQWtELDBDQUFPO0FBQ3pELG9EQUFvRCw2Q0FBVTtBQUM5RCwrQ0FBK0MsMENBQU87QUFDdEQsNkNBQTZDLDBDQUFPO0FBQ3BELCtDQUErQyw2Q0FBVTtBQUN6RCxrREFBa0QsNkNBQVU7QUFDNUQsMENBQTBDLDBDQUFPO0FBQ2pELG1DQUFtQywwQ0FBTztBQUMxQyw2Q0FBNkMsMENBQU87QUFDcEQsK0NBQStDLDZDQUFVO0FBQ3pELDBDQUEwQywwQ0FBTztBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsZ0JBQWdCO0FBQ3pELDRDQUE0QyxvQ0FBb0M7QUFDaEYsMENBQTBDLGtDQUFrQztBQUM1RSwrQ0FBK0Msc0JBQXNCO0FBQ3JFO0FBQ0E7QUFDQSxzQkFBc0IsNkJBQTZCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FB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eUNBQXlDLDBDQUFPO0FBQ2hELDJDQUEyQywwQ0FBTztBQUNsRCwwQ0FBMEMsMENBQU87QUFDakQsa0RBQWtELDZDQUFVO0FBQzVEO0FBQ0EsZ0RBQWdELDZDQUFVO0FBQzFELDZDQUE2QywwQ0FBTztBQUNwRCwrQ0FBK0MsNkNBQVU7QUFDekQsbUNBQW1DLDBDQUFPO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUtFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3RocmVlLXN0ZGxpYi9jb250cm9scy9UcmFuc2Zvcm1Db250cm9scy5qcz82NWNhIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19kZWZOb3JtYWxQcm9wID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcChvYmosIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZSB9KSA6IG9ialtrZXldID0gdmFsdWU7XG52YXIgX19wdWJsaWNGaWVsZCA9IChvYmosIGtleSwgdmFsdWUpID0+IHtcbiAgX19kZWZOb3JtYWxQcm9wKG9iaiwgdHlwZW9mIGtleSAhPT0gXCJzeW1ib2xcIiA/IGtleSArIFwiXCIgOiBrZXksIHZhbHVlKTtcbiAgcmV0dXJuIHZhbHVlO1xufTtcbmltcG9ydCB7IE9iamVjdDNELCBSYXljYXN0ZXIsIFZlY3RvcjMsIFF1YXRlcm5pb24sIEV1bGVyLCBNYXRyaXg0LCBNZXNoQmFzaWNNYXRlcmlhbCwgRG91YmxlU2lkZSwgTGluZUJhc2ljTWF0ZXJpYWwsIEN5bGluZGVyR2VvbWV0cnksIEJveEdlb21ldHJ5LCBCdWZmZXJHZW9tZXRyeSwgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSwgTWVzaCwgTGluZSwgT2N0YWhlZHJvbkdlb21ldHJ5LCBQbGFuZUdlb21ldHJ5LCBUb3J1c0dlb21ldHJ5LCBTcGhlcmVHZW9tZXRyeSwgQ29sb3IgfSBmcm9tIFwidGhyZWVcIjtcbmNsYXNzIFRyYW5zZm9ybUNvbnRyb2xzIGV4dGVuZHMgT2JqZWN0M0Qge1xuICBjb25zdHJ1Y3RvcihjYW1lcmEsIGRvbUVsZW1lbnQpIHtcbiAgICBzdXBlcigpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJpc1RyYW5zZm9ybUNvbnRyb2xzXCIsIHRydWUpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJ2aXNpYmxlXCIsIGZhbHNlKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiZG9tRWxlbWVudFwiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwicmF5Y2FzdGVyXCIsIG5ldyBSYXljYXN0ZXIoKSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImdpem1vXCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJwbGFuZVwiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwidGVtcFZlY3RvclwiLCBuZXcgVmVjdG9yMygpKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwidGVtcFZlY3RvcjJcIiwgbmV3IFZlY3RvcjMoKSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInRlbXBRdWF0ZXJuaW9uXCIsIG5ldyBRdWF0ZXJuaW9uKCkpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJ1bml0XCIsIHtcbiAgICAgIFg6IG5ldyBWZWN0b3IzKDEsIDAsIDApLFxuICAgICAgWTogbmV3IFZlY3RvcjMoMCwgMSwgMCksXG4gICAgICBaOiBuZXcgVmVjdG9yMygwLCAwLCAxKVxuICAgIH0pO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJwb2ludFN0YXJ0XCIsIG5ldyBWZWN0b3IzKCkpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJwb2ludEVuZFwiLCBuZXcgVmVjdG9yMygpKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwib2Zmc2V0XCIsIG5ldyBWZWN0b3IzKCkpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJyb3RhdGlvbkF4aXNcIiwgbmV3IFZlY3RvcjMoKSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInN0YXJ0Tm9ybVwiLCBuZXcgVmVjdG9yMygpKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiZW5kTm9ybVwiLCBuZXcgVmVjdG9yMygpKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwicm90YXRpb25BbmdsZVwiLCAwKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiY2FtZXJhUG9zaXRpb25cIiwgbmV3IFZlY3RvcjMoKSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImNhbWVyYVF1YXRlcm5pb25cIiwgbmV3IFF1YXRlcm5pb24oKSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImNhbWVyYVNjYWxlXCIsIG5ldyBWZWN0b3IzKCkpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJwYXJlbnRQb3NpdGlvblwiLCBuZXcgVmVjdG9yMygpKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwicGFyZW50UXVhdGVybmlvblwiLCBuZXcgUXVhdGVybmlvbigpKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwicGFyZW50UXVhdGVybmlvbkludlwiLCBuZXcgUXVhdGVybmlvbigpKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwicGFyZW50U2NhbGVcIiwgbmV3IFZlY3RvcjMoKSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcIndvcmxkUG9zaXRpb25TdGFydFwiLCBuZXcgVmVjdG9yMygpKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwid29ybGRRdWF0ZXJuaW9uU3RhcnRcIiwgbmV3IFF1YXRlcm5pb24oKSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcIndvcmxkU2NhbGVTdGFydFwiLCBuZXcgVmVjdG9yMygpKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwid29ybGRQb3NpdGlvblwiLCBuZXcgVmVjdG9yMygpKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwid29ybGRRdWF0ZXJuaW9uXCIsIG5ldyBRdWF0ZXJuaW9uKCkpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJ3b3JsZFF1YXRlcm5pb25JbnZcIiwgbmV3IFF1YXRlcm5pb24oKSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcIndvcmxkU2NhbGVcIiwgbmV3IFZlY3RvcjMoKSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImV5ZVwiLCBuZXcgVmVjdG9yMygpKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwicG9zaXRpb25TdGFydFwiLCBuZXcgVmVjdG9yMygpKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwicXVhdGVybmlvblN0YXJ0XCIsIG5ldyBRdWF0ZXJuaW9uKCkpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJzY2FsZVN0YXJ0XCIsIG5ldyBWZWN0b3IzKCkpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJjYW1lcmFcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcIm9iamVjdFwiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiZW5hYmxlZFwiLCB0cnVlKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiYXhpc1wiLCBudWxsKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwibW9kZVwiLCBcInRyYW5zbGF0ZVwiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwidHJhbnNsYXRpb25TbmFwXCIsIG51bGwpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJyb3RhdGlvblNuYXBcIiwgbnVsbCk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInNjYWxlU25hcFwiLCBudWxsKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwic3BhY2VcIiwgXCJ3b3JsZFwiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwic2l6ZVwiLCAxKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiZHJhZ2dpbmdcIiwgZmFsc2UpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJzaG93WFwiLCB0cnVlKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwic2hvd1lcIiwgdHJ1ZSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInNob3daXCIsIHRydWUpO1xuICAgIC8vIGV2ZW50c1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJjaGFuZ2VFdmVudFwiLCB7IHR5cGU6IFwiY2hhbmdlXCIgfSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcIm1vdXNlRG93bkV2ZW50XCIsIHsgdHlwZTogXCJtb3VzZURvd25cIiwgbW9kZTogdGhpcy5tb2RlIH0pO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJtb3VzZVVwRXZlbnRcIiwgeyB0eXBlOiBcIm1vdXNlVXBcIiwgbW9kZTogdGhpcy5tb2RlIH0pO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJvYmplY3RDaGFuZ2VFdmVudFwiLCB7IHR5cGU6IFwib2JqZWN0Q2hhbmdlXCIgfSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImludGVyc2VjdE9iamVjdFdpdGhSYXlcIiwgKG9iamVjdCwgcmF5Y2FzdGVyLCBpbmNsdWRlSW52aXNpYmxlKSA9PiB7XG4gICAgICBjb25zdCBhbGxJbnRlcnNlY3Rpb25zID0gcmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdChvYmplY3QsIHRydWUpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbGxJbnRlcnNlY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChhbGxJbnRlcnNlY3Rpb25zW2ldLm9iamVjdC52aXNpYmxlIHx8IGluY2x1ZGVJbnZpc2libGUpIHtcbiAgICAgICAgICByZXR1cm4gYWxsSW50ZXJzZWN0aW9uc1tpXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuICAgIC8vIFNldCBjdXJyZW50IG9iamVjdFxuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJhdHRhY2hcIiwgKG9iamVjdCkgPT4ge1xuICAgICAgdGhpcy5vYmplY3QgPSBvYmplY3Q7XG4gICAgICB0aGlzLnZpc2libGUgPSB0cnVlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSk7XG4gICAgLy8gRGV0YXRjaCBmcm9tIG9iamVjdFxuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJkZXRhY2hcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5vYmplY3QgPSB2b2lkIDA7XG4gICAgICB0aGlzLnZpc2libGUgPSBmYWxzZTtcbiAgICAgIHRoaXMuYXhpcyA9IG51bGw7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9KTtcbiAgICAvLyBSZXNldFxuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJyZXNldFwiLCAoKSA9PiB7XG4gICAgICBpZiAoIXRoaXMuZW5hYmxlZClcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICBpZiAodGhpcy5kcmFnZ2luZykge1xuICAgICAgICBpZiAodGhpcy5vYmplY3QgIT09IHZvaWQgMCkge1xuICAgICAgICAgIHRoaXMub2JqZWN0LnBvc2l0aW9uLmNvcHkodGhpcy5wb3NpdGlvblN0YXJ0KTtcbiAgICAgICAgICB0aGlzLm9iamVjdC5xdWF0ZXJuaW9uLmNvcHkodGhpcy5xdWF0ZXJuaW9uU3RhcnQpO1xuICAgICAgICAgIHRoaXMub2JqZWN0LnNjYWxlLmNvcHkodGhpcy5zY2FsZVN0YXJ0KTtcbiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQodGhpcy5jaGFuZ2VFdmVudCk7XG4gICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KHRoaXMub2JqZWN0Q2hhbmdlRXZlbnQpO1xuICAgICAgICAgIHRoaXMucG9pbnRTdGFydC5jb3B5KHRoaXMucG9pbnRFbmQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9KTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwidXBkYXRlTWF0cml4V29ybGRcIiwgKCkgPT4ge1xuICAgICAgaWYgKHRoaXMub2JqZWN0ICE9PSB2b2lkIDApIHtcbiAgICAgICAgdGhpcy5vYmplY3QudXBkYXRlTWF0cml4V29ybGQoKTtcbiAgICAgICAgaWYgKHRoaXMub2JqZWN0LnBhcmVudCA9PT0gbnVsbCkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJUcmFuc2Zvcm1Db250cm9sczogVGhlIGF0dGFjaGVkIDNEIG9iamVjdCBtdXN0IGJlIGEgcGFydCBvZiB0aGUgc2NlbmUgZ3JhcGguXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMub2JqZWN0LnBhcmVudC5tYXRyaXhXb3JsZC5kZWNvbXBvc2UodGhpcy5wYXJlbnRQb3NpdGlvbiwgdGhpcy5wYXJlbnRRdWF0ZXJuaW9uLCB0aGlzLnBhcmVudFNjYWxlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9iamVjdC5tYXRyaXhXb3JsZC5kZWNvbXBvc2UodGhpcy53b3JsZFBvc2l0aW9uLCB0aGlzLndvcmxkUXVhdGVybmlvbiwgdGhpcy53b3JsZFNjYWxlKTtcbiAgICAgICAgdGhpcy5wYXJlbnRRdWF0ZXJuaW9uSW52LmNvcHkodGhpcy5wYXJlbnRRdWF0ZXJuaW9uKS5pbnZlcnQoKTtcbiAgICAgICAgdGhpcy53b3JsZFF1YXRlcm5pb25JbnYuY29weSh0aGlzLndvcmxkUXVhdGVybmlvbikuaW52ZXJ0KCk7XG4gICAgICB9XG4gICAgICB0aGlzLmNhbWVyYS51cGRhdGVNYXRyaXhXb3JsZCgpO1xuICAgICAgdGhpcy5jYW1lcmEubWF0cml4V29ybGQuZGVjb21wb3NlKHRoaXMuY2FtZXJhUG9zaXRpb24sIHRoaXMuY2FtZXJhUXVhdGVybmlvbiwgdGhpcy5jYW1lcmFTY2FsZSk7XG4gICAgICB0aGlzLmV5ZS5jb3B5KHRoaXMuY2FtZXJhUG9zaXRpb24pLnN1Yih0aGlzLndvcmxkUG9zaXRpb24pLm5vcm1hbGl6ZSgpO1xuICAgICAgc3VwZXIudXBkYXRlTWF0cml4V29ybGQoKTtcbiAgICB9KTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwicG9pbnRlckhvdmVyXCIsIChwb2ludGVyKSA9PiB7XG4gICAgICBpZiAodGhpcy5vYmplY3QgPT09IHZvaWQgMCB8fCB0aGlzLmRyYWdnaW5nID09PSB0cnVlKVxuICAgICAgICByZXR1cm47XG4gICAgICB0aGlzLnJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKHBvaW50ZXIsIHRoaXMuY2FtZXJhKTtcbiAgICAgIGNvbnN0IGludGVyc2VjdCA9IHRoaXMuaW50ZXJzZWN0T2JqZWN0V2l0aFJheSh0aGlzLmdpem1vLnBpY2tlclt0aGlzLm1vZGVdLCB0aGlzLnJheWNhc3Rlcik7XG4gICAgICBpZiAoaW50ZXJzZWN0KSB7XG4gICAgICAgIHRoaXMuYXhpcyA9IGludGVyc2VjdC5vYmplY3QubmFtZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYXhpcyA9IG51bGw7XG4gICAgICB9XG4gICAgfSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInBvaW50ZXJEb3duXCIsIChwb2ludGVyKSA9PiB7XG4gICAgICBpZiAodGhpcy5vYmplY3QgPT09IHZvaWQgMCB8fCB0aGlzLmRyYWdnaW5nID09PSB0cnVlIHx8IHBvaW50ZXIuYnV0dG9uICE9PSAwKVxuICAgICAgICByZXR1cm47XG4gICAgICBpZiAodGhpcy5heGlzICE9PSBudWxsKSB7XG4gICAgICAgIHRoaXMucmF5Y2FzdGVyLnNldEZyb21DYW1lcmEocG9pbnRlciwgdGhpcy5jYW1lcmEpO1xuICAgICAgICBjb25zdCBwbGFuZUludGVyc2VjdCA9IHRoaXMuaW50ZXJzZWN0T2JqZWN0V2l0aFJheSh0aGlzLnBsYW5lLCB0aGlzLnJheWNhc3RlciwgdHJ1ZSk7XG4gICAgICAgIGlmIChwbGFuZUludGVyc2VjdCkge1xuICAgICAgICAgIGxldCBzcGFjZSA9IHRoaXMuc3BhY2U7XG4gICAgICAgICAgaWYgKHRoaXMubW9kZSA9PT0gXCJzY2FsZVwiKSB7XG4gICAgICAgICAgICBzcGFjZSA9IFwibG9jYWxcIjtcbiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuYXhpcyA9PT0gXCJFXCIgfHwgdGhpcy5heGlzID09PSBcIlhZWkVcIiB8fCB0aGlzLmF4aXMgPT09IFwiWFlaXCIpIHtcbiAgICAgICAgICAgIHNwYWNlID0gXCJ3b3JsZFwiO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc3BhY2UgPT09IFwibG9jYWxcIiAmJiB0aGlzLm1vZGUgPT09IFwicm90YXRlXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHNuYXAgPSB0aGlzLnJvdGF0aW9uU25hcDtcbiAgICAgICAgICAgIGlmICh0aGlzLmF4aXMgPT09IFwiWFwiICYmIHNuYXApXG4gICAgICAgICAgICAgIHRoaXMub2JqZWN0LnJvdGF0aW9uLnggPSBNYXRoLnJvdW5kKHRoaXMub2JqZWN0LnJvdGF0aW9uLnggLyBzbmFwKSAqIHNuYXA7XG4gICAgICAgICAgICBpZiAodGhpcy5heGlzID09PSBcIllcIiAmJiBzbmFwKVxuICAgICAgICAgICAgICB0aGlzLm9iamVjdC5yb3RhdGlvbi55ID0gTWF0aC5yb3VuZCh0aGlzLm9iamVjdC5yb3RhdGlvbi55IC8gc25hcCkgKiBzbmFwO1xuICAgICAgICAgICAgaWYgKHRoaXMuYXhpcyA9PT0gXCJaXCIgJiYgc25hcClcbiAgICAgICAgICAgICAgdGhpcy5vYmplY3Qucm90YXRpb24ueiA9IE1hdGgucm91bmQodGhpcy5vYmplY3Qucm90YXRpb24ueiAvIHNuYXApICogc25hcDtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5vYmplY3QudXBkYXRlTWF0cml4V29ybGQoKTtcbiAgICAgICAgICBpZiAodGhpcy5vYmplY3QucGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5wYXJlbnQudXBkYXRlTWF0cml4V29ybGQoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5wb3NpdGlvblN0YXJ0LmNvcHkodGhpcy5vYmplY3QucG9zaXRpb24pO1xuICAgICAgICAgIHRoaXMucXVhdGVybmlvblN0YXJ0LmNvcHkodGhpcy5vYmplY3QucXVhdGVybmlvbik7XG4gICAgICAgICAgdGhpcy5zY2FsZVN0YXJ0LmNvcHkodGhpcy5vYmplY3Quc2NhbGUpO1xuICAgICAgICAgIHRoaXMub2JqZWN0Lm1hdHJpeFdvcmxkLmRlY29tcG9zZSh0aGlzLndvcmxkUG9zaXRpb25TdGFydCwgdGhpcy53b3JsZFF1YXRlcm5pb25TdGFydCwgdGhpcy53b3JsZFNjYWxlU3RhcnQpO1xuICAgICAgICAgIHRoaXMucG9pbnRTdGFydC5jb3B5KHBsYW5lSW50ZXJzZWN0LnBvaW50KS5zdWIodGhpcy53b3JsZFBvc2l0aW9uU3RhcnQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZHJhZ2dpbmcgPSB0cnVlO1xuICAgICAgICB0aGlzLm1vdXNlRG93bkV2ZW50Lm1vZGUgPSB0aGlzLm1vZGU7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCh0aGlzLm1vdXNlRG93bkV2ZW50KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwicG9pbnRlck1vdmVcIiwgKHBvaW50ZXIpID0+IHtcbiAgICAgIGNvbnN0IGF4aXMgPSB0aGlzLmF4aXM7XG4gICAgICBjb25zdCBtb2RlID0gdGhpcy5tb2RlO1xuICAgICAgY29uc3Qgb2JqZWN0ID0gdGhpcy5vYmplY3Q7XG4gICAgICBsZXQgc3BhY2UgPSB0aGlzLnNwYWNlO1xuICAgICAgaWYgKG1vZGUgPT09IFwic2NhbGVcIikge1xuICAgICAgICBzcGFjZSA9IFwibG9jYWxcIjtcbiAgICAgIH0gZWxzZSBpZiAoYXhpcyA9PT0gXCJFXCIgfHwgYXhpcyA9PT0gXCJYWVpFXCIgfHwgYXhpcyA9PT0gXCJYWVpcIikge1xuICAgICAgICBzcGFjZSA9IFwid29ybGRcIjtcbiAgICAgIH1cbiAgICAgIGlmIChvYmplY3QgPT09IHZvaWQgMCB8fCBheGlzID09PSBudWxsIHx8IHRoaXMuZHJhZ2dpbmcgPT09IGZhbHNlIHx8IHBvaW50ZXIuYnV0dG9uICE9PSAtMSlcbiAgICAgICAgcmV0dXJuO1xuICAgICAgdGhpcy5yYXljYXN0ZXIuc2V0RnJvbUNhbWVyYShwb2ludGVyLCB0aGlzLmNhbWVyYSk7XG4gICAgICBjb25zdCBwbGFuZUludGVyc2VjdCA9IHRoaXMuaW50ZXJzZWN0T2JqZWN0V2l0aFJheSh0aGlzLnBsYW5lLCB0aGlzLnJheWNhc3RlciwgdHJ1ZSk7XG4gICAgICBpZiAoIXBsYW5lSW50ZXJzZWN0KVxuICAgICAgICByZXR1cm47XG4gICAgICB0aGlzLnBvaW50RW5kLmNvcHkocGxhbmVJbnRlcnNlY3QucG9pbnQpLnN1Yih0aGlzLndvcmxkUG9zaXRpb25TdGFydCk7XG4gICAgICBpZiAobW9kZSA9PT0gXCJ0cmFuc2xhdGVcIikge1xuICAgICAgICB0aGlzLm9mZnNldC5jb3B5KHRoaXMucG9pbnRFbmQpLnN1Yih0aGlzLnBvaW50U3RhcnQpO1xuICAgICAgICBpZiAoc3BhY2UgPT09IFwibG9jYWxcIiAmJiBheGlzICE9PSBcIlhZWlwiKSB7XG4gICAgICAgICAgdGhpcy5vZmZzZXQuYXBwbHlRdWF0ZXJuaW9uKHRoaXMud29ybGRRdWF0ZXJuaW9uSW52KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXhpcy5pbmRleE9mKFwiWFwiKSA9PT0gLTEpXG4gICAgICAgICAgdGhpcy5vZmZzZXQueCA9IDA7XG4gICAgICAgIGlmIChheGlzLmluZGV4T2YoXCJZXCIpID09PSAtMSlcbiAgICAgICAgICB0aGlzLm9mZnNldC55ID0gMDtcbiAgICAgICAgaWYgKGF4aXMuaW5kZXhPZihcIlpcIikgPT09IC0xKVxuICAgICAgICAgIHRoaXMub2Zmc2V0LnogPSAwO1xuICAgICAgICBpZiAoc3BhY2UgPT09IFwibG9jYWxcIiAmJiBheGlzICE9PSBcIlhZWlwiKSB7XG4gICAgICAgICAgdGhpcy5vZmZzZXQuYXBwbHlRdWF0ZXJuaW9uKHRoaXMucXVhdGVybmlvblN0YXJ0KS5kaXZpZGUodGhpcy5wYXJlbnRTY2FsZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5vZmZzZXQuYXBwbHlRdWF0ZXJuaW9uKHRoaXMucGFyZW50UXVhdGVybmlvbkludikuZGl2aWRlKHRoaXMucGFyZW50U2NhbGUpO1xuICAgICAgICB9XG4gICAgICAgIG9iamVjdC5wb3NpdGlvbi5jb3B5KHRoaXMub2Zmc2V0KS5hZGQodGhpcy5wb3NpdGlvblN0YXJ0KTtcbiAgICAgICAgaWYgKHRoaXMudHJhbnNsYXRpb25TbmFwKSB7XG4gICAgICAgICAgaWYgKHNwYWNlID09PSBcImxvY2FsXCIpIHtcbiAgICAgICAgICAgIG9iamVjdC5wb3NpdGlvbi5hcHBseVF1YXRlcm5pb24odGhpcy50ZW1wUXVhdGVybmlvbi5jb3B5KHRoaXMucXVhdGVybmlvblN0YXJ0KS5pbnZlcnQoKSk7XG4gICAgICAgICAgICBpZiAoYXhpcy5zZWFyY2goXCJYXCIpICE9PSAtMSkge1xuICAgICAgICAgICAgICBvYmplY3QucG9zaXRpb24ueCA9IE1hdGgucm91bmQob2JqZWN0LnBvc2l0aW9uLnggLyB0aGlzLnRyYW5zbGF0aW9uU25hcCkgKiB0aGlzLnRyYW5zbGF0aW9uU25hcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChheGlzLnNlYXJjaChcIllcIikgIT09IC0xKSB7XG4gICAgICAgICAgICAgIG9iamVjdC5wb3NpdGlvbi55ID0gTWF0aC5yb3VuZChvYmplY3QucG9zaXRpb24ueSAvIHRoaXMudHJhbnNsYXRpb25TbmFwKSAqIHRoaXMudHJhbnNsYXRpb25TbmFwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGF4aXMuc2VhcmNoKFwiWlwiKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgb2JqZWN0LnBvc2l0aW9uLnogPSBNYXRoLnJvdW5kKG9iamVjdC5wb3NpdGlvbi56IC8gdGhpcy50cmFuc2xhdGlvblNuYXApICogdGhpcy50cmFuc2xhdGlvblNuYXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvYmplY3QucG9zaXRpb24uYXBwbHlRdWF0ZXJuaW9uKHRoaXMucXVhdGVybmlvblN0YXJ0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHNwYWNlID09PSBcIndvcmxkXCIpIHtcbiAgICAgICAgICAgIGlmIChvYmplY3QucGFyZW50KSB7XG4gICAgICAgICAgICAgIG9iamVjdC5wb3NpdGlvbi5hZGQodGhpcy50ZW1wVmVjdG9yLnNldEZyb21NYXRyaXhQb3NpdGlvbihvYmplY3QucGFyZW50Lm1hdHJpeFdvcmxkKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXhpcy5zZWFyY2goXCJYXCIpICE9PSAtMSkge1xuICAgICAgICAgICAgICBvYmplY3QucG9zaXRpb24ueCA9IE1hdGgucm91bmQob2JqZWN0LnBvc2l0aW9uLnggLyB0aGlzLnRyYW5zbGF0aW9uU25hcCkgKiB0aGlzLnRyYW5zbGF0aW9uU25hcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChheGlzLnNlYXJjaChcIllcIikgIT09IC0xKSB7XG4gICAgICAgICAgICAgIG9iamVjdC5wb3NpdGlvbi55ID0gTWF0aC5yb3VuZChvYmplY3QucG9zaXRpb24ueSAvIHRoaXMudHJhbnNsYXRpb25TbmFwKSAqIHRoaXMudHJhbnNsYXRpb25TbmFwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGF4aXMuc2VhcmNoKFwiWlwiKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgb2JqZWN0LnBvc2l0aW9uLnogPSBNYXRoLnJvdW5kKG9iamVjdC5wb3NpdGlvbi56IC8gdGhpcy50cmFuc2xhdGlvblNuYXApICogdGhpcy50cmFuc2xhdGlvblNuYXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob2JqZWN0LnBhcmVudCkge1xuICAgICAgICAgICAgICBvYmplY3QucG9zaXRpb24uc3ViKHRoaXMudGVtcFZlY3Rvci5zZXRGcm9tTWF0cml4UG9zaXRpb24ob2JqZWN0LnBhcmVudC5tYXRyaXhXb3JsZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChtb2RlID09PSBcInNjYWxlXCIpIHtcbiAgICAgICAgaWYgKGF4aXMuc2VhcmNoKFwiWFlaXCIpICE9PSAtMSkge1xuICAgICAgICAgIGxldCBkID0gdGhpcy5wb2ludEVuZC5sZW5ndGgoKSAvIHRoaXMucG9pbnRTdGFydC5sZW5ndGgoKTtcbiAgICAgICAgICBpZiAodGhpcy5wb2ludEVuZC5kb3QodGhpcy5wb2ludFN0YXJ0KSA8IDApXG4gICAgICAgICAgICBkICo9IC0xO1xuICAgICAgICAgIHRoaXMudGVtcFZlY3RvcjIuc2V0KGQsIGQsIGQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMudGVtcFZlY3Rvci5jb3B5KHRoaXMucG9pbnRTdGFydCk7XG4gICAgICAgICAgdGhpcy50ZW1wVmVjdG9yMi5jb3B5KHRoaXMucG9pbnRFbmQpO1xuICAgICAgICAgIHRoaXMudGVtcFZlY3Rvci5hcHBseVF1YXRlcm5pb24odGhpcy53b3JsZFF1YXRlcm5pb25JbnYpO1xuICAgICAgICAgIHRoaXMudGVtcFZlY3RvcjIuYXBwbHlRdWF0ZXJuaW9uKHRoaXMud29ybGRRdWF0ZXJuaW9uSW52KTtcbiAgICAgICAgICB0aGlzLnRlbXBWZWN0b3IyLmRpdmlkZSh0aGlzLnRlbXBWZWN0b3IpO1xuICAgICAgICAgIGlmIChheGlzLnNlYXJjaChcIlhcIikgPT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLnRlbXBWZWN0b3IyLnggPSAxO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoYXhpcy5zZWFyY2goXCJZXCIpID09PSAtMSkge1xuICAgICAgICAgICAgdGhpcy50ZW1wVmVjdG9yMi55ID0gMTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGF4aXMuc2VhcmNoKFwiWlwiKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMudGVtcFZlY3RvcjIueiA9IDE7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG9iamVjdC5zY2FsZS5jb3B5KHRoaXMuc2NhbGVTdGFydCkubXVsdGlwbHkodGhpcy50ZW1wVmVjdG9yMik7XG4gICAgICAgIGlmICh0aGlzLnNjYWxlU25hcCAmJiB0aGlzLm9iamVjdCkge1xuICAgICAgICAgIGlmIChheGlzLnNlYXJjaChcIlhcIikgIT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5zY2FsZS54ID0gTWF0aC5yb3VuZChvYmplY3Quc2NhbGUueCAvIHRoaXMuc2NhbGVTbmFwKSAqIHRoaXMuc2NhbGVTbmFwIHx8IHRoaXMuc2NhbGVTbmFwO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoYXhpcy5zZWFyY2goXCJZXCIpICE9PSAtMSkge1xuICAgICAgICAgICAgb2JqZWN0LnNjYWxlLnkgPSBNYXRoLnJvdW5kKG9iamVjdC5zY2FsZS55IC8gdGhpcy5zY2FsZVNuYXApICogdGhpcy5zY2FsZVNuYXAgfHwgdGhpcy5zY2FsZVNuYXA7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChheGlzLnNlYXJjaChcIlpcIikgIT09IC0xKSB7XG4gICAgICAgICAgICBvYmplY3Quc2NhbGUueiA9IE1hdGgucm91bmQob2JqZWN0LnNjYWxlLnogLyB0aGlzLnNjYWxlU25hcCkgKiB0aGlzLnNjYWxlU25hcCB8fCB0aGlzLnNjYWxlU25hcDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gXCJyb3RhdGVcIikge1xuICAgICAgICB0aGlzLm9mZnNldC5jb3B5KHRoaXMucG9pbnRFbmQpLnN1Yih0aGlzLnBvaW50U3RhcnQpO1xuICAgICAgICBjb25zdCBST1RBVElPTl9TUEVFRCA9IDIwIC8gdGhpcy53b3JsZFBvc2l0aW9uLmRpc3RhbmNlVG8odGhpcy50ZW1wVmVjdG9yLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLmNhbWVyYS5tYXRyaXhXb3JsZCkpO1xuICAgICAgICBpZiAoYXhpcyA9PT0gXCJFXCIpIHtcbiAgICAgICAgICB0aGlzLnJvdGF0aW9uQXhpcy5jb3B5KHRoaXMuZXllKTtcbiAgICAgICAgICB0aGlzLnJvdGF0aW9uQW5nbGUgPSB0aGlzLnBvaW50RW5kLmFuZ2xlVG8odGhpcy5wb2ludFN0YXJ0KTtcbiAgICAgICAgICB0aGlzLnN0YXJ0Tm9ybS5jb3B5KHRoaXMucG9pbnRTdGFydCkubm9ybWFsaXplKCk7XG4gICAgICAgICAgdGhpcy5lbmROb3JtLmNvcHkodGhpcy5wb2ludEVuZCkubm9ybWFsaXplKCk7XG4gICAgICAgICAgdGhpcy5yb3RhdGlvbkFuZ2xlICo9IHRoaXMuZW5kTm9ybS5jcm9zcyh0aGlzLnN0YXJ0Tm9ybSkuZG90KHRoaXMuZXllKSA8IDAgPyAxIDogLTE7XG4gICAgICAgIH0gZWxzZSBpZiAoYXhpcyA9PT0gXCJYWVpFXCIpIHtcbiAgICAgICAgICB0aGlzLnJvdGF0aW9uQXhpcy5jb3B5KHRoaXMub2Zmc2V0KS5jcm9zcyh0aGlzLmV5ZSkubm9ybWFsaXplKCk7XG4gICAgICAgICAgdGhpcy5yb3RhdGlvbkFuZ2xlID0gdGhpcy5vZmZzZXQuZG90KHRoaXMudGVtcFZlY3Rvci5jb3B5KHRoaXMucm90YXRpb25BeGlzKS5jcm9zcyh0aGlzLmV5ZSkpICogUk9UQVRJT05fU1BFRUQ7XG4gICAgICAgIH0gZWxzZSBpZiAoYXhpcyA9PT0gXCJYXCIgfHwgYXhpcyA9PT0gXCJZXCIgfHwgYXhpcyA9PT0gXCJaXCIpIHtcbiAgICAgICAgICB0aGlzLnJvdGF0aW9uQXhpcy5jb3B5KHRoaXMudW5pdFtheGlzXSk7XG4gICAgICAgICAgdGhpcy50ZW1wVmVjdG9yLmNvcHkodGhpcy51bml0W2F4aXNdKTtcbiAgICAgICAgICBpZiAoc3BhY2UgPT09IFwibG9jYWxcIikge1xuICAgICAgICAgICAgdGhpcy50ZW1wVmVjdG9yLmFwcGx5UXVhdGVybmlvbih0aGlzLndvcmxkUXVhdGVybmlvbik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMucm90YXRpb25BbmdsZSA9IHRoaXMub2Zmc2V0LmRvdCh0aGlzLnRlbXBWZWN0b3IuY3Jvc3ModGhpcy5leWUpLm5vcm1hbGl6ZSgpKSAqIFJPVEFUSU9OX1NQRUVEO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnJvdGF0aW9uU25hcCkge1xuICAgICAgICAgIHRoaXMucm90YXRpb25BbmdsZSA9IE1hdGgucm91bmQodGhpcy5yb3RhdGlvbkFuZ2xlIC8gdGhpcy5yb3RhdGlvblNuYXApICogdGhpcy5yb3RhdGlvblNuYXA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNwYWNlID09PSBcImxvY2FsXCIgJiYgYXhpcyAhPT0gXCJFXCIgJiYgYXhpcyAhPT0gXCJYWVpFXCIpIHtcbiAgICAgICAgICBvYmplY3QucXVhdGVybmlvbi5jb3B5KHRoaXMucXVhdGVybmlvblN0YXJ0KTtcbiAgICAgICAgICBvYmplY3QucXVhdGVybmlvbi5tdWx0aXBseSh0aGlzLnRlbXBRdWF0ZXJuaW9uLnNldEZyb21BeGlzQW5nbGUodGhpcy5yb3RhdGlvbkF4aXMsIHRoaXMucm90YXRpb25BbmdsZSkpLm5vcm1hbGl6ZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMucm90YXRpb25BeGlzLmFwcGx5UXVhdGVybmlvbih0aGlzLnBhcmVudFF1YXRlcm5pb25JbnYpO1xuICAgICAgICAgIG9iamVjdC5xdWF0ZXJuaW9uLmNvcHkodGhpcy50ZW1wUXVhdGVybmlvbi5zZXRGcm9tQXhpc0FuZ2xlKHRoaXMucm90YXRpb25BeGlzLCB0aGlzLnJvdGF0aW9uQW5nbGUpKTtcbiAgICAgICAgICBvYmplY3QucXVhdGVybmlvbi5tdWx0aXBseSh0aGlzLnF1YXRlcm5pb25TdGFydCkubm9ybWFsaXplKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCh0aGlzLmNoYW5nZUV2ZW50KTtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCh0aGlzLm9iamVjdENoYW5nZUV2ZW50KTtcbiAgICB9KTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwicG9pbnRlclVwXCIsIChwb2ludGVyKSA9PiB7XG4gICAgICBpZiAocG9pbnRlci5idXR0b24gIT09IDApXG4gICAgICAgIHJldHVybjtcbiAgICAgIGlmICh0aGlzLmRyYWdnaW5nICYmIHRoaXMuYXhpcyAhPT0gbnVsbCkge1xuICAgICAgICB0aGlzLm1vdXNlVXBFdmVudC5tb2RlID0gdGhpcy5tb2RlO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQodGhpcy5tb3VzZVVwRXZlbnQpO1xuICAgICAgfVxuICAgICAgdGhpcy5kcmFnZ2luZyA9IGZhbHNlO1xuICAgICAgdGhpcy5heGlzID0gbnVsbDtcbiAgICB9KTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiZ2V0UG9pbnRlclwiLCAoZXZlbnQpID0+IHtcbiAgICAgIHZhciBfYTtcbiAgICAgIGlmICh0aGlzLmRvbUVsZW1lbnQgJiYgKChfYSA9IHRoaXMuZG9tRWxlbWVudC5vd25lckRvY3VtZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2EucG9pbnRlckxvY2tFbGVtZW50KSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHg6IDAsXG4gICAgICAgICAgeTogMCxcbiAgICAgICAgICBidXR0b246IGV2ZW50LmJ1dHRvblxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgcG9pbnRlciA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzID8gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0gOiBldmVudDtcbiAgICAgICAgY29uc3QgcmVjdCA9IHRoaXMuZG9tRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB4OiAocG9pbnRlci5jbGllbnRYIC0gcmVjdC5sZWZ0KSAvIHJlY3Qud2lkdGggKiAyIC0gMSxcbiAgICAgICAgICB5OiAtKHBvaW50ZXIuY2xpZW50WSAtIHJlY3QudG9wKSAvIHJlY3QuaGVpZ2h0ICogMiArIDEsXG4gICAgICAgICAgYnV0dG9uOiBldmVudC5idXR0b25cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwib25Qb2ludGVySG92ZXJcIiwgKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoIXRoaXMuZW5hYmxlZClcbiAgICAgICAgcmV0dXJuO1xuICAgICAgc3dpdGNoIChldmVudC5wb2ludGVyVHlwZSkge1xuICAgICAgICBjYXNlIFwibW91c2VcIjpcbiAgICAgICAgY2FzZSBcInBlblwiOlxuICAgICAgICAgIHRoaXMucG9pbnRlckhvdmVyKHRoaXMuZ2V0UG9pbnRlcihldmVudCkpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0pO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJvblBvaW50ZXJEb3duXCIsIChldmVudCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLmVuYWJsZWQgfHwgIXRoaXMuZG9tRWxlbWVudClcbiAgICAgICAgcmV0dXJuO1xuICAgICAgdGhpcy5kb21FbGVtZW50LnN0eWxlLnRvdWNoQWN0aW9uID0gXCJub25lXCI7XG4gICAgICB0aGlzLmRvbUVsZW1lbnQub3duZXJEb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgdGhpcy5vblBvaW50ZXJNb3ZlKTtcbiAgICAgIHRoaXMucG9pbnRlckhvdmVyKHRoaXMuZ2V0UG9pbnRlcihldmVudCkpO1xuICAgICAgdGhpcy5wb2ludGVyRG93bih0aGlzLmdldFBvaW50ZXIoZXZlbnQpKTtcbiAgICB9KTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwib25Qb2ludGVyTW92ZVwiLCAoZXZlbnQpID0+IHtcbiAgICAgIGlmICghdGhpcy5lbmFibGVkKVxuICAgICAgICByZXR1cm47XG4gICAgICB0aGlzLnBvaW50ZXJNb3ZlKHRoaXMuZ2V0UG9pbnRlcihldmVudCkpO1xuICAgIH0pO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJvblBvaW50ZXJVcFwiLCAoZXZlbnQpID0+IHtcbiAgICAgIGlmICghdGhpcy5lbmFibGVkIHx8ICF0aGlzLmRvbUVsZW1lbnQpXG4gICAgICAgIHJldHVybjtcbiAgICAgIHRoaXMuZG9tRWxlbWVudC5zdHlsZS50b3VjaEFjdGlvbiA9IFwiXCI7XG4gICAgICB0aGlzLmRvbUVsZW1lbnQub3duZXJEb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgdGhpcy5vblBvaW50ZXJNb3ZlKTtcbiAgICAgIHRoaXMucG9pbnRlclVwKHRoaXMuZ2V0UG9pbnRlcihldmVudCkpO1xuICAgIH0pO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJnZXRNb2RlXCIsICgpID0+IHRoaXMubW9kZSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInNldE1vZGVcIiwgKG1vZGUpID0+IHtcbiAgICAgIHRoaXMubW9kZSA9IG1vZGU7XG4gICAgfSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInNldFRyYW5zbGF0aW9uU25hcFwiLCAodHJhbnNsYXRpb25TbmFwKSA9PiB7XG4gICAgICB0aGlzLnRyYW5zbGF0aW9uU25hcCA9IHRyYW5zbGF0aW9uU25hcDtcbiAgICB9KTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwic2V0Um90YXRpb25TbmFwXCIsIChyb3RhdGlvblNuYXApID0+IHtcbiAgICAgIHRoaXMucm90YXRpb25TbmFwID0gcm90YXRpb25TbmFwO1xuICAgIH0pO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJzZXRTY2FsZVNuYXBcIiwgKHNjYWxlU25hcCkgPT4ge1xuICAgICAgdGhpcy5zY2FsZVNuYXAgPSBzY2FsZVNuYXA7XG4gICAgfSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInNldFNpemVcIiwgKHNpemUpID0+IHtcbiAgICAgIHRoaXMuc2l6ZSA9IHNpemU7XG4gICAgfSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInNldFNwYWNlXCIsIChzcGFjZSkgPT4ge1xuICAgICAgdGhpcy5zcGFjZSA9IHNwYWNlO1xuICAgIH0pO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJ1cGRhdGVcIiwgKCkgPT4ge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBcIlRIUkVFLlRyYW5zZm9ybUNvbnRyb2xzOiB1cGRhdGUgZnVuY3Rpb24gaGFzIG5vIG1vcmUgZnVuY3Rpb25hbGl0eSBhbmQgdGhlcmVmb3JlIGhhcyBiZWVuIGRlcHJlY2F0ZWQuXCJcbiAgICAgICk7XG4gICAgfSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImNvbm5lY3RcIiwgKGRvbUVsZW1lbnQpID0+IHtcbiAgICAgIGlmIChkb21FbGVtZW50ID09PSBkb2N1bWVudCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICdUSFJFRS5PcmJpdENvbnRyb2xzOiBcImRvY3VtZW50XCIgc2hvdWxkIG5vdCBiZSB1c2VkIGFzIHRoZSB0YXJnZXQgXCJkb21FbGVtZW50XCIuIFBsZWFzZSB1c2UgXCJyZW5kZXJlci5kb21FbGVtZW50XCIgaW5zdGVhZC4nXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB0aGlzLmRvbUVsZW1lbnQgPSBkb21FbGVtZW50O1xuICAgICAgdGhpcy5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZG93blwiLCB0aGlzLm9uUG9pbnRlckRvd24pO1xuICAgICAgdGhpcy5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVybW92ZVwiLCB0aGlzLm9uUG9pbnRlckhvdmVyKTtcbiAgICAgIHRoaXMuZG9tRWxlbWVudC5vd25lckRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVydXBcIiwgdGhpcy5vblBvaW50ZXJVcCk7XG4gICAgfSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImRpc3Bvc2VcIiwgKCkgPT4ge1xuICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2Y7XG4gICAgICAoX2EgPSB0aGlzLmRvbUVsZW1lbnQpID09IG51bGwgPyB2b2lkIDAgOiBfYS5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIiwgdGhpcy5vblBvaW50ZXJEb3duKTtcbiAgICAgIChfYiA9IHRoaXMuZG9tRWxlbWVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVybW92ZVwiLCB0aGlzLm9uUG9pbnRlckhvdmVyKTtcbiAgICAgIChfZCA9IChfYyA9IHRoaXMuZG9tRWxlbWVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLm93bmVyRG9jdW1lbnQpID09IG51bGwgPyB2b2lkIDAgOiBfZC5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgdGhpcy5vblBvaW50ZXJNb3ZlKTtcbiAgICAgIChfZiA9IChfZSA9IHRoaXMuZG9tRWxlbWVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9lLm93bmVyRG9jdW1lbnQpID09IG51bGwgPyB2b2lkIDAgOiBfZi5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIHRoaXMub25Qb2ludGVyVXApO1xuICAgICAgdGhpcy50cmF2ZXJzZSgoY2hpbGQpID0+IHtcbiAgICAgICAgY29uc3QgbWVzaCA9IGNoaWxkO1xuICAgICAgICBpZiAobWVzaC5nZW9tZXRyeSkge1xuICAgICAgICAgIG1lc2guZ2VvbWV0cnkuZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNoLm1hdGVyaWFsKSB7XG4gICAgICAgICAgbWVzaC5tYXRlcmlhbC5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHRoaXMuZG9tRWxlbWVudCA9IGRvbUVsZW1lbnQ7XG4gICAgdGhpcy5jYW1lcmEgPSBjYW1lcmE7XG4gICAgdGhpcy5naXptbyA9IG5ldyBUcmFuc2Zvcm1Db250cm9sc0dpem1vKCk7XG4gICAgdGhpcy5hZGQodGhpcy5naXptbyk7XG4gICAgdGhpcy5wbGFuZSA9IG5ldyBUcmFuc2Zvcm1Db250cm9sc1BsYW5lKCk7XG4gICAgdGhpcy5hZGQodGhpcy5wbGFuZSk7XG4gICAgY29uc3QgZGVmaW5lUHJvcGVydHkgPSAocHJvcE5hbWUsIGRlZmF1bHRWYWx1ZSkgPT4ge1xuICAgICAgbGV0IHByb3BWYWx1ZSA9IGRlZmF1bHRWYWx1ZTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBwcm9wTmFtZSwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBwcm9wVmFsdWUgIT09IHZvaWQgMCA/IHByb3BWYWx1ZSA6IGRlZmF1bHRWYWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgIGlmIChwcm9wVmFsdWUgIT09IHZhbHVlKSB7XG4gICAgICAgICAgICBwcm9wVmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMucGxhbmVbcHJvcE5hbWVdID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLmdpem1vW3Byb3BOYW1lXSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KHsgdHlwZTogcHJvcE5hbWUgKyBcIi1jaGFuZ2VkXCIsIHZhbHVlIH0pO1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KHRoaXMuY2hhbmdlRXZlbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB0aGlzW3Byb3BOYW1lXSA9IGRlZmF1bHRWYWx1ZTtcbiAgICAgIHRoaXMucGxhbmVbcHJvcE5hbWVdID0gZGVmYXVsdFZhbHVlO1xuICAgICAgdGhpcy5naXptb1twcm9wTmFtZV0gPSBkZWZhdWx0VmFsdWU7XG4gICAgfTtcbiAgICBkZWZpbmVQcm9wZXJ0eShcImNhbWVyYVwiLCB0aGlzLmNhbWVyYSk7XG4gICAgZGVmaW5lUHJvcGVydHkoXCJvYmplY3RcIiwgdGhpcy5vYmplY3QpO1xuICAgIGRlZmluZVByb3BlcnR5KFwiZW5hYmxlZFwiLCB0aGlzLmVuYWJsZWQpO1xuICAgIGRlZmluZVByb3BlcnR5KFwiYXhpc1wiLCB0aGlzLmF4aXMpO1xuICAgIGRlZmluZVByb3BlcnR5KFwibW9kZVwiLCB0aGlzLm1vZGUpO1xuICAgIGRlZmluZVByb3BlcnR5KFwidHJhbnNsYXRpb25TbmFwXCIsIHRoaXMudHJhbnNsYXRpb25TbmFwKTtcbiAgICBkZWZpbmVQcm9wZXJ0eShcInJvdGF0aW9uU25hcFwiLCB0aGlzLnJvdGF0aW9uU25hcCk7XG4gICAgZGVmaW5lUHJvcGVydHkoXCJzY2FsZVNuYXBcIiwgdGhpcy5zY2FsZVNuYXApO1xuICAgIGRlZmluZVByb3BlcnR5KFwic3BhY2VcIiwgdGhpcy5zcGFjZSk7XG4gICAgZGVmaW5lUHJvcGVydHkoXCJzaXplXCIsIHRoaXMuc2l6ZSk7XG4gICAgZGVmaW5lUHJvcGVydHkoXCJkcmFnZ2luZ1wiLCB0aGlzLmRyYWdnaW5nKTtcbiAgICBkZWZpbmVQcm9wZXJ0eShcInNob3dYXCIsIHRoaXMuc2hvd1gpO1xuICAgIGRlZmluZVByb3BlcnR5KFwic2hvd1lcIiwgdGhpcy5zaG93WSk7XG4gICAgZGVmaW5lUHJvcGVydHkoXCJzaG93WlwiLCB0aGlzLnNob3daKTtcbiAgICBkZWZpbmVQcm9wZXJ0eShcIndvcmxkUG9zaXRpb25cIiwgdGhpcy53b3JsZFBvc2l0aW9uKTtcbiAgICBkZWZpbmVQcm9wZXJ0eShcIndvcmxkUG9zaXRpb25TdGFydFwiLCB0aGlzLndvcmxkUG9zaXRpb25TdGFydCk7XG4gICAgZGVmaW5lUHJvcGVydHkoXCJ3b3JsZFF1YXRlcm5pb25cIiwgdGhpcy53b3JsZFF1YXRlcm5pb24pO1xuICAgIGRlZmluZVByb3BlcnR5KFwid29ybGRRdWF0ZXJuaW9uU3RhcnRcIiwgdGhpcy53b3JsZFF1YXRlcm5pb25TdGFydCk7XG4gICAgZGVmaW5lUHJvcGVydHkoXCJjYW1lcmFQb3NpdGlvblwiLCB0aGlzLmNhbWVyYVBvc2l0aW9uKTtcbiAgICBkZWZpbmVQcm9wZXJ0eShcImNhbWVyYVF1YXRlcm5pb25cIiwgdGhpcy5jYW1lcmFRdWF0ZXJuaW9uKTtcbiAgICBkZWZpbmVQcm9wZXJ0eShcInBvaW50U3RhcnRcIiwgdGhpcy5wb2ludFN0YXJ0KTtcbiAgICBkZWZpbmVQcm9wZXJ0eShcInBvaW50RW5kXCIsIHRoaXMucG9pbnRFbmQpO1xuICAgIGRlZmluZVByb3BlcnR5KFwicm90YXRpb25BeGlzXCIsIHRoaXMucm90YXRpb25BeGlzKTtcbiAgICBkZWZpbmVQcm9wZXJ0eShcInJvdGF0aW9uQW5nbGVcIiwgdGhpcy5yb3RhdGlvbkFuZ2xlKTtcbiAgICBkZWZpbmVQcm9wZXJ0eShcImV5ZVwiLCB0aGlzLmV5ZSk7XG4gICAgaWYgKGRvbUVsZW1lbnQgIT09IHZvaWQgMClcbiAgICAgIHRoaXMuY29ubmVjdChkb21FbGVtZW50KTtcbiAgfVxufVxuY2xhc3MgVHJhbnNmb3JtQ29udHJvbHNHaXptbyBleHRlbmRzIE9iamVjdDNEIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiaXNUcmFuc2Zvcm1Db250cm9sc0dpem1vXCIsIHRydWUpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJ0eXBlXCIsIFwiVHJhbnNmb3JtQ29udHJvbHNHaXptb1wiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwidGVtcFZlY3RvclwiLCBuZXcgVmVjdG9yMygwLCAwLCAwKSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInRlbXBFdWxlclwiLCBuZXcgRXVsZXIoKSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImFsaWduVmVjdG9yXCIsIG5ldyBWZWN0b3IzKDAsIDEsIDApKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiemVyb1ZlY3RvclwiLCBuZXcgVmVjdG9yMygwLCAwLCAwKSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImxvb2tBdE1hdHJpeFwiLCBuZXcgTWF0cml4NCgpKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwidGVtcFF1YXRlcm5pb25cIiwgbmV3IFF1YXRlcm5pb24oKSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInRlbXBRdWF0ZXJuaW9uMlwiLCBuZXcgUXVhdGVybmlvbigpKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiaWRlbnRpdHlRdWF0ZXJuaW9uXCIsIG5ldyBRdWF0ZXJuaW9uKCkpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJ1bml0WFwiLCBuZXcgVmVjdG9yMygxLCAwLCAwKSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInVuaXRZXCIsIG5ldyBWZWN0b3IzKDAsIDEsIDApKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwidW5pdFpcIiwgbmV3IFZlY3RvcjMoMCwgMCwgMSkpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJnaXptb1wiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwicGlja2VyXCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJoZWxwZXJcIik7XG4gICAgLy8gdGhlc2UgYXJlIHNldCBmcm9tIHBhcmVudCBjbGFzcyBUcmFuc2Zvcm1Db250cm9sc1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJyb3RhdGlvbkF4aXNcIiwgbmV3IFZlY3RvcjMoKSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImNhbWVyYVBvc2l0aW9uXCIsIG5ldyBWZWN0b3IzKCkpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJ3b3JsZFBvc2l0aW9uU3RhcnRcIiwgbmV3IFZlY3RvcjMoKSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcIndvcmxkUXVhdGVybmlvblN0YXJ0XCIsIG5ldyBRdWF0ZXJuaW9uKCkpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJ3b3JsZFBvc2l0aW9uXCIsIG5ldyBWZWN0b3IzKCkpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJ3b3JsZFF1YXRlcm5pb25cIiwgbmV3IFF1YXRlcm5pb24oKSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImV5ZVwiLCBuZXcgVmVjdG9yMygpKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiY2FtZXJhXCIsIG51bGwpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJlbmFibGVkXCIsIHRydWUpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJheGlzXCIsIG51bGwpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJtb2RlXCIsIFwidHJhbnNsYXRlXCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJzcGFjZVwiLCBcIndvcmxkXCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJzaXplXCIsIDEpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJkcmFnZ2luZ1wiLCBmYWxzZSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInNob3dYXCIsIHRydWUpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJzaG93WVwiLCB0cnVlKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwic2hvd1pcIiwgdHJ1ZSk7XG4gICAgLy8gdXBkYXRlTWF0cml4V29ybGQgd2lsbCB1cGRhdGUgdHJhbnNmb3JtYXRpb25zIGFuZCBhcHBlYXJhbmNlIG9mIGluZGl2aWR1YWwgaGFuZGxlc1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJ1cGRhdGVNYXRyaXhXb3JsZFwiLCAoKSA9PiB7XG4gICAgICBsZXQgc3BhY2UgPSB0aGlzLnNwYWNlO1xuICAgICAgaWYgKHRoaXMubW9kZSA9PT0gXCJzY2FsZVwiKSB7XG4gICAgICAgIHNwYWNlID0gXCJsb2NhbFwiO1xuICAgICAgfVxuICAgICAgY29uc3QgcXVhdGVybmlvbiA9IHNwYWNlID09PSBcImxvY2FsXCIgPyB0aGlzLndvcmxkUXVhdGVybmlvbiA6IHRoaXMuaWRlbnRpdHlRdWF0ZXJuaW9uO1xuICAgICAgdGhpcy5naXptb1tcInRyYW5zbGF0ZVwiXS52aXNpYmxlID0gdGhpcy5tb2RlID09PSBcInRyYW5zbGF0ZVwiO1xuICAgICAgdGhpcy5naXptb1tcInJvdGF0ZVwiXS52aXNpYmxlID0gdGhpcy5tb2RlID09PSBcInJvdGF0ZVwiO1xuICAgICAgdGhpcy5naXptb1tcInNjYWxlXCJdLnZpc2libGUgPSB0aGlzLm1vZGUgPT09IFwic2NhbGVcIjtcbiAgICAgIHRoaXMuaGVscGVyW1widHJhbnNsYXRlXCJdLnZpc2libGUgPSB0aGlzLm1vZGUgPT09IFwidHJhbnNsYXRlXCI7XG4gICAgICB0aGlzLmhlbHBlcltcInJvdGF0ZVwiXS52aXNpYmxlID0gdGhpcy5tb2RlID09PSBcInJvdGF0ZVwiO1xuICAgICAgdGhpcy5oZWxwZXJbXCJzY2FsZVwiXS52aXNpYmxlID0gdGhpcy5tb2RlID09PSBcInNjYWxlXCI7XG4gICAgICBsZXQgaGFuZGxlcyA9IFtdO1xuICAgICAgaGFuZGxlcyA9IGhhbmRsZXMuY29uY2F0KHRoaXMucGlja2VyW3RoaXMubW9kZV0uY2hpbGRyZW4pO1xuICAgICAgaGFuZGxlcyA9IGhhbmRsZXMuY29uY2F0KHRoaXMuZ2l6bW9bdGhpcy5tb2RlXS5jaGlsZHJlbik7XG4gICAgICBoYW5kbGVzID0gaGFuZGxlcy5jb25jYXQodGhpcy5oZWxwZXJbdGhpcy5tb2RlXS5jaGlsZHJlbik7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhhbmRsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgaGFuZGxlID0gaGFuZGxlc1tpXTtcbiAgICAgICAgaGFuZGxlLnZpc2libGUgPSB0cnVlO1xuICAgICAgICBoYW5kbGUucm90YXRpb24uc2V0KDAsIDAsIDApO1xuICAgICAgICBoYW5kbGUucG9zaXRpb24uY29weSh0aGlzLndvcmxkUG9zaXRpb24pO1xuICAgICAgICBsZXQgZmFjdG9yO1xuICAgICAgICBpZiAodGhpcy5jYW1lcmEuaXNPcnRob2dyYXBoaWNDYW1lcmEpIHtcbiAgICAgICAgICBmYWN0b3IgPSAodGhpcy5jYW1lcmEudG9wIC0gdGhpcy5jYW1lcmEuYm90dG9tKSAvIHRoaXMuY2FtZXJhLnpvb207XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZmFjdG9yID0gdGhpcy53b3JsZFBvc2l0aW9uLmRpc3RhbmNlVG8odGhpcy5jYW1lcmFQb3NpdGlvbikgKiBNYXRoLm1pbigxLjkgKiBNYXRoLnRhbihNYXRoLlBJICogdGhpcy5jYW1lcmEuZm92IC8gMzYwKSAvIHRoaXMuY2FtZXJhLnpvb20sIDcpO1xuICAgICAgICB9XG4gICAgICAgIGhhbmRsZS5zY2FsZS5zZXQoMSwgMSwgMSkubXVsdGlwbHlTY2FsYXIoZmFjdG9yICogdGhpcy5zaXplIC8gNyk7XG4gICAgICAgIGlmIChoYW5kbGUudGFnID09PSBcImhlbHBlclwiKSB7XG4gICAgICAgICAgaGFuZGxlLnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICBpZiAoaGFuZGxlLm5hbWUgPT09IFwiQVhJU1wiKSB7XG4gICAgICAgICAgICBoYW5kbGUucG9zaXRpb24uY29weSh0aGlzLndvcmxkUG9zaXRpb25TdGFydCk7XG4gICAgICAgICAgICBoYW5kbGUudmlzaWJsZSA9ICEhdGhpcy5heGlzO1xuICAgICAgICAgICAgaWYgKHRoaXMuYXhpcyA9PT0gXCJYXCIpIHtcbiAgICAgICAgICAgICAgdGhpcy50ZW1wUXVhdGVybmlvbi5zZXRGcm9tRXVsZXIodGhpcy50ZW1wRXVsZXIuc2V0KDAsIDAsIDApKTtcbiAgICAgICAgICAgICAgaGFuZGxlLnF1YXRlcm5pb24uY29weShxdWF0ZXJuaW9uKS5tdWx0aXBseSh0aGlzLnRlbXBRdWF0ZXJuaW9uKTtcbiAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHRoaXMuYWxpZ25WZWN0b3IuY29weSh0aGlzLnVuaXRYKS5hcHBseVF1YXRlcm5pb24ocXVhdGVybmlvbikuZG90KHRoaXMuZXllKSkgPiAwLjkpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGUudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5heGlzID09PSBcIllcIikge1xuICAgICAgICAgICAgICB0aGlzLnRlbXBRdWF0ZXJuaW9uLnNldEZyb21FdWxlcih0aGlzLnRlbXBFdWxlci5zZXQoMCwgMCwgTWF0aC5QSSAvIDIpKTtcbiAgICAgICAgICAgICAgaGFuZGxlLnF1YXRlcm5pb24uY29weShxdWF0ZXJuaW9uKS5tdWx0aXBseSh0aGlzLnRlbXBRdWF0ZXJuaW9uKTtcbiAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHRoaXMuYWxpZ25WZWN0b3IuY29weSh0aGlzLnVuaXRZKS5hcHBseVF1YXRlcm5pb24ocXVhdGVybmlvbikuZG90KHRoaXMuZXllKSkgPiAwLjkpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGUudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5heGlzID09PSBcIlpcIikge1xuICAgICAgICAgICAgICB0aGlzLnRlbXBRdWF0ZXJuaW9uLnNldEZyb21FdWxlcih0aGlzLnRlbXBFdWxlci5zZXQoMCwgTWF0aC5QSSAvIDIsIDApKTtcbiAgICAgICAgICAgICAgaGFuZGxlLnF1YXRlcm5pb24uY29weShxdWF0ZXJuaW9uKS5tdWx0aXBseSh0aGlzLnRlbXBRdWF0ZXJuaW9uKTtcbiAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHRoaXMuYWxpZ25WZWN0b3IuY29weSh0aGlzLnVuaXRaKS5hcHBseVF1YXRlcm5pb24ocXVhdGVybmlvbikuZG90KHRoaXMuZXllKSkgPiAwLjkpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGUudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5heGlzID09PSBcIlhZWkVcIikge1xuICAgICAgICAgICAgICB0aGlzLnRlbXBRdWF0ZXJuaW9uLnNldEZyb21FdWxlcih0aGlzLnRlbXBFdWxlci5zZXQoMCwgTWF0aC5QSSAvIDIsIDApKTtcbiAgICAgICAgICAgICAgdGhpcy5hbGlnblZlY3Rvci5jb3B5KHRoaXMucm90YXRpb25BeGlzKTtcbiAgICAgICAgICAgICAgaGFuZGxlLnF1YXRlcm5pb24uc2V0RnJvbVJvdGF0aW9uTWF0cml4KFxuICAgICAgICAgICAgICAgIHRoaXMubG9va0F0TWF0cml4Lmxvb2tBdCh0aGlzLnplcm9WZWN0b3IsIHRoaXMuYWxpZ25WZWN0b3IsIHRoaXMudW5pdFkpXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGhhbmRsZS5xdWF0ZXJuaW9uLm11bHRpcGx5KHRoaXMudGVtcFF1YXRlcm5pb24pO1xuICAgICAgICAgICAgICBoYW5kbGUudmlzaWJsZSA9IHRoaXMuZHJhZ2dpbmc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5heGlzID09PSBcIkVcIikge1xuICAgICAgICAgICAgICBoYW5kbGUudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoaGFuZGxlLm5hbWUgPT09IFwiU1RBUlRcIikge1xuICAgICAgICAgICAgaGFuZGxlLnBvc2l0aW9uLmNvcHkodGhpcy53b3JsZFBvc2l0aW9uU3RhcnQpO1xuICAgICAgICAgICAgaGFuZGxlLnZpc2libGUgPSB0aGlzLmRyYWdnaW5nO1xuICAgICAgICAgIH0gZWxzZSBpZiAoaGFuZGxlLm5hbWUgPT09IFwiRU5EXCIpIHtcbiAgICAgICAgICAgIGhhbmRsZS5wb3NpdGlvbi5jb3B5KHRoaXMud29ybGRQb3NpdGlvbik7XG4gICAgICAgICAgICBoYW5kbGUudmlzaWJsZSA9IHRoaXMuZHJhZ2dpbmc7XG4gICAgICAgICAgfSBlbHNlIGlmIChoYW5kbGUubmFtZSA9PT0gXCJERUxUQVwiKSB7XG4gICAgICAgICAgICBoYW5kbGUucG9zaXRpb24uY29weSh0aGlzLndvcmxkUG9zaXRpb25TdGFydCk7XG4gICAgICAgICAgICBoYW5kbGUucXVhdGVybmlvbi5jb3B5KHRoaXMud29ybGRRdWF0ZXJuaW9uU3RhcnQpO1xuICAgICAgICAgICAgdGhpcy50ZW1wVmVjdG9yLnNldCgxZS0xMCwgMWUtMTAsIDFlLTEwKS5hZGQodGhpcy53b3JsZFBvc2l0aW9uU3RhcnQpLnN1Yih0aGlzLndvcmxkUG9zaXRpb24pLm11bHRpcGx5U2NhbGFyKC0xKTtcbiAgICAgICAgICAgIHRoaXMudGVtcFZlY3Rvci5hcHBseVF1YXRlcm5pb24odGhpcy53b3JsZFF1YXRlcm5pb25TdGFydC5jbG9uZSgpLmludmVydCgpKTtcbiAgICAgICAgICAgIGhhbmRsZS5zY2FsZS5jb3B5KHRoaXMudGVtcFZlY3Rvcik7XG4gICAgICAgICAgICBoYW5kbGUudmlzaWJsZSA9IHRoaXMuZHJhZ2dpbmc7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGhhbmRsZS5xdWF0ZXJuaW9uLmNvcHkocXVhdGVybmlvbik7XG4gICAgICAgICAgICBpZiAodGhpcy5kcmFnZ2luZykge1xuICAgICAgICAgICAgICBoYW5kbGUucG9zaXRpb24uY29weSh0aGlzLndvcmxkUG9zaXRpb25TdGFydCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBoYW5kbGUucG9zaXRpb24uY29weSh0aGlzLndvcmxkUG9zaXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYXhpcykge1xuICAgICAgICAgICAgICBoYW5kbGUudmlzaWJsZSA9IHRoaXMuYXhpcy5zZWFyY2goaGFuZGxlLm5hbWUpICE9PSAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaGFuZGxlLnF1YXRlcm5pb24uY29weShxdWF0ZXJuaW9uKTtcbiAgICAgICAgaWYgKHRoaXMubW9kZSA9PT0gXCJ0cmFuc2xhdGVcIiB8fCB0aGlzLm1vZGUgPT09IFwic2NhbGVcIikge1xuICAgICAgICAgIGNvbnN0IEFYSVNfSElERV9UUkVTSE9MRCA9IDAuOTk7XG4gICAgICAgICAgY29uc3QgUExBTkVfSElERV9UUkVTSE9MRCA9IDAuMjtcbiAgICAgICAgICBjb25zdCBBWElTX0ZMSVBfVFJFU0hPTEQgPSAwO1xuICAgICAgICAgIGlmIChoYW5kbGUubmFtZSA9PT0gXCJYXCIgfHwgaGFuZGxlLm5hbWUgPT09IFwiWFlaWFwiKSB7XG4gICAgICAgICAgICBpZiAoTWF0aC5hYnModGhpcy5hbGlnblZlY3Rvci5jb3B5KHRoaXMudW5pdFgpLmFwcGx5UXVhdGVybmlvbihxdWF0ZXJuaW9uKS5kb3QodGhpcy5leWUpKSA+IEFYSVNfSElERV9UUkVTSE9MRCkge1xuICAgICAgICAgICAgICBoYW5kbGUuc2NhbGUuc2V0KDFlLTEwLCAxZS0xMCwgMWUtMTApO1xuICAgICAgICAgICAgICBoYW5kbGUudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaGFuZGxlLm5hbWUgPT09IFwiWVwiIHx8IGhhbmRsZS5uYW1lID09PSBcIlhZWllcIikge1xuICAgICAgICAgICAgaWYgKE1hdGguYWJzKHRoaXMuYWxpZ25WZWN0b3IuY29weSh0aGlzLnVuaXRZKS5hcHBseVF1YXRlcm5pb24ocXVhdGVybmlvbikuZG90KHRoaXMuZXllKSkgPiBBWElTX0hJREVfVFJFU0hPTEQpIHtcbiAgICAgICAgICAgICAgaGFuZGxlLnNjYWxlLnNldCgxZS0xMCwgMWUtMTAsIDFlLTEwKTtcbiAgICAgICAgICAgICAgaGFuZGxlLnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGhhbmRsZS5uYW1lID09PSBcIlpcIiB8fCBoYW5kbGUubmFtZSA9PT0gXCJYWVpaXCIpIHtcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyh0aGlzLmFsaWduVmVjdG9yLmNvcHkodGhpcy51bml0WikuYXBwbHlRdWF0ZXJuaW9uKHF1YXRlcm5pb24pLmRvdCh0aGlzLmV5ZSkpID4gQVhJU19ISURFX1RSRVNIT0xEKSB7XG4gICAgICAgICAgICAgIGhhbmRsZS5zY2FsZS5zZXQoMWUtMTAsIDFlLTEwLCAxZS0xMCk7XG4gICAgICAgICAgICAgIGhhbmRsZS52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChoYW5kbGUubmFtZSA9PT0gXCJYWVwiKSB7XG4gICAgICAgICAgICBpZiAoTWF0aC5hYnModGhpcy5hbGlnblZlY3Rvci5jb3B5KHRoaXMudW5pdFopLmFwcGx5UXVhdGVybmlvbihxdWF0ZXJuaW9uKS5kb3QodGhpcy5leWUpKSA8IFBMQU5FX0hJREVfVFJFU0hPTEQpIHtcbiAgICAgICAgICAgICAgaGFuZGxlLnNjYWxlLnNldCgxZS0xMCwgMWUtMTAsIDFlLTEwKTtcbiAgICAgICAgICAgICAgaGFuZGxlLnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGhhbmRsZS5uYW1lID09PSBcIllaXCIpIHtcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyh0aGlzLmFsaWduVmVjdG9yLmNvcHkodGhpcy51bml0WCkuYXBwbHlRdWF0ZXJuaW9uKHF1YXRlcm5pb24pLmRvdCh0aGlzLmV5ZSkpIDwgUExBTkVfSElERV9UUkVTSE9MRCkge1xuICAgICAgICAgICAgICBoYW5kbGUuc2NhbGUuc2V0KDFlLTEwLCAxZS0xMCwgMWUtMTApO1xuICAgICAgICAgICAgICBoYW5kbGUudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaGFuZGxlLm5hbWUgPT09IFwiWFpcIikge1xuICAgICAgICAgICAgaWYgKE1hdGguYWJzKHRoaXMuYWxpZ25WZWN0b3IuY29weSh0aGlzLnVuaXRZKS5hcHBseVF1YXRlcm5pb24ocXVhdGVybmlvbikuZG90KHRoaXMuZXllKSkgPCBQTEFORV9ISURFX1RSRVNIT0xEKSB7XG4gICAgICAgICAgICAgIGhhbmRsZS5zY2FsZS5zZXQoMWUtMTAsIDFlLTEwLCAxZS0xMCk7XG4gICAgICAgICAgICAgIGhhbmRsZS52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChoYW5kbGUubmFtZS5zZWFyY2goXCJYXCIpICE9PSAtMSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuYWxpZ25WZWN0b3IuY29weSh0aGlzLnVuaXRYKS5hcHBseVF1YXRlcm5pb24ocXVhdGVybmlvbikuZG90KHRoaXMuZXllKSA8IEFYSVNfRkxJUF9UUkVTSE9MRCkge1xuICAgICAgICAgICAgICBpZiAoaGFuZGxlLnRhZyA9PT0gXCJmd2RcIikge1xuICAgICAgICAgICAgICAgIGhhbmRsZS52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlLnNjYWxlLnggKj0gLTE7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaGFuZGxlLnRhZyA9PT0gXCJid2RcIikge1xuICAgICAgICAgICAgICBoYW5kbGUudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaGFuZGxlLm5hbWUuc2VhcmNoKFwiWVwiKSAhPT0gLTEpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFsaWduVmVjdG9yLmNvcHkodGhpcy51bml0WSkuYXBwbHlRdWF0ZXJuaW9uKHF1YXRlcm5pb24pLmRvdCh0aGlzLmV5ZSkgPCBBWElTX0ZMSVBfVFJFU0hPTEQpIHtcbiAgICAgICAgICAgICAgaWYgKGhhbmRsZS50YWcgPT09IFwiZndkXCIpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGUudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGhhbmRsZS5zY2FsZS55ICo9IC0xO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGhhbmRsZS50YWcgPT09IFwiYndkXCIpIHtcbiAgICAgICAgICAgICAgaGFuZGxlLnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGhhbmRsZS5uYW1lLnNlYXJjaChcIlpcIikgIT09IC0xKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hbGlnblZlY3Rvci5jb3B5KHRoaXMudW5pdFopLmFwcGx5UXVhdGVybmlvbihxdWF0ZXJuaW9uKS5kb3QodGhpcy5leWUpIDwgQVhJU19GTElQX1RSRVNIT0xEKSB7XG4gICAgICAgICAgICAgIGlmIChoYW5kbGUudGFnID09PSBcImZ3ZFwiKSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlLnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBoYW5kbGUuc2NhbGUueiAqPSAtMTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChoYW5kbGUudGFnID09PSBcImJ3ZFwiKSB7XG4gICAgICAgICAgICAgIGhhbmRsZS52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMubW9kZSA9PT0gXCJyb3RhdGVcIikge1xuICAgICAgICAgIHRoaXMudGVtcFF1YXRlcm5pb24yLmNvcHkocXVhdGVybmlvbik7XG4gICAgICAgICAgdGhpcy5hbGlnblZlY3Rvci5jb3B5KHRoaXMuZXllKS5hcHBseVF1YXRlcm5pb24odGhpcy50ZW1wUXVhdGVybmlvbi5jb3B5KHF1YXRlcm5pb24pLmludmVydCgpKTtcbiAgICAgICAgICBpZiAoaGFuZGxlLm5hbWUuc2VhcmNoKFwiRVwiKSAhPT0gLTEpIHtcbiAgICAgICAgICAgIGhhbmRsZS5xdWF0ZXJuaW9uLnNldEZyb21Sb3RhdGlvbk1hdHJpeCh0aGlzLmxvb2tBdE1hdHJpeC5sb29rQXQodGhpcy5leWUsIHRoaXMuemVyb1ZlY3RvciwgdGhpcy51bml0WSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaGFuZGxlLm5hbWUgPT09IFwiWFwiKSB7XG4gICAgICAgICAgICB0aGlzLnRlbXBRdWF0ZXJuaW9uLnNldEZyb21BeGlzQW5nbGUodGhpcy51bml0WCwgTWF0aC5hdGFuMigtdGhpcy5hbGlnblZlY3Rvci55LCB0aGlzLmFsaWduVmVjdG9yLnopKTtcbiAgICAgICAgICAgIHRoaXMudGVtcFF1YXRlcm5pb24ubXVsdGlwbHlRdWF0ZXJuaW9ucyh0aGlzLnRlbXBRdWF0ZXJuaW9uMiwgdGhpcy50ZW1wUXVhdGVybmlvbik7XG4gICAgICAgICAgICBoYW5kbGUucXVhdGVybmlvbi5jb3B5KHRoaXMudGVtcFF1YXRlcm5pb24pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaGFuZGxlLm5hbWUgPT09IFwiWVwiKSB7XG4gICAgICAgICAgICB0aGlzLnRlbXBRdWF0ZXJuaW9uLnNldEZyb21BeGlzQW5nbGUodGhpcy51bml0WSwgTWF0aC5hdGFuMih0aGlzLmFsaWduVmVjdG9yLngsIHRoaXMuYWxpZ25WZWN0b3IueikpO1xuICAgICAgICAgICAgdGhpcy50ZW1wUXVhdGVybmlvbi5tdWx0aXBseVF1YXRlcm5pb25zKHRoaXMudGVtcFF1YXRlcm5pb24yLCB0aGlzLnRlbXBRdWF0ZXJuaW9uKTtcbiAgICAgICAgICAgIGhhbmRsZS5xdWF0ZXJuaW9uLmNvcHkodGhpcy50ZW1wUXVhdGVybmlvbik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChoYW5kbGUubmFtZSA9PT0gXCJaXCIpIHtcbiAgICAgICAgICAgIHRoaXMudGVtcFF1YXRlcm5pb24uc2V0RnJvbUF4aXNBbmdsZSh0aGlzLnVuaXRaLCBNYXRoLmF0YW4yKHRoaXMuYWxpZ25WZWN0b3IueSwgdGhpcy5hbGlnblZlY3Rvci54KSk7XG4gICAgICAgICAgICB0aGlzLnRlbXBRdWF0ZXJuaW9uLm11bHRpcGx5UXVhdGVybmlvbnModGhpcy50ZW1wUXVhdGVybmlvbjIsIHRoaXMudGVtcFF1YXRlcm5pb24pO1xuICAgICAgICAgICAgaGFuZGxlLnF1YXRlcm5pb24uY29weSh0aGlzLnRlbXBRdWF0ZXJuaW9uKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaGFuZGxlLnZpc2libGUgPSBoYW5kbGUudmlzaWJsZSAmJiAoaGFuZGxlLm5hbWUuaW5kZXhPZihcIlhcIikgPT09IC0xIHx8IHRoaXMuc2hvd1gpO1xuICAgICAgICBoYW5kbGUudmlzaWJsZSA9IGhhbmRsZS52aXNpYmxlICYmIChoYW5kbGUubmFtZS5pbmRleE9mKFwiWVwiKSA9PT0gLTEgfHwgdGhpcy5zaG93WSk7XG4gICAgICAgIGhhbmRsZS52aXNpYmxlID0gaGFuZGxlLnZpc2libGUgJiYgKGhhbmRsZS5uYW1lLmluZGV4T2YoXCJaXCIpID09PSAtMSB8fCB0aGlzLnNob3daKTtcbiAgICAgICAgaGFuZGxlLnZpc2libGUgPSBoYW5kbGUudmlzaWJsZSAmJiAoaGFuZGxlLm5hbWUuaW5kZXhPZihcIkVcIikgPT09IC0xIHx8IHRoaXMuc2hvd1ggJiYgdGhpcy5zaG93WSAmJiB0aGlzLnNob3daKTtcbiAgICAgICAgaGFuZGxlLm1hdGVyaWFsLnRlbXBPcGFjaXR5ID0gaGFuZGxlLm1hdGVyaWFsLnRlbXBPcGFjaXR5IHx8IGhhbmRsZS5tYXRlcmlhbC5vcGFjaXR5O1xuICAgICAgICBoYW5kbGUubWF0ZXJpYWwudGVtcENvbG9yID0gaGFuZGxlLm1hdGVyaWFsLnRlbXBDb2xvciB8fCBoYW5kbGUubWF0ZXJpYWwuY29sb3IuY2xvbmUoKTtcbiAgICAgICAgaGFuZGxlLm1hdGVyaWFsLmNvbG9yLmNvcHkoaGFuZGxlLm1hdGVyaWFsLnRlbXBDb2xvcik7XG4gICAgICAgIGhhbmRsZS5tYXRlcmlhbC5vcGFjaXR5ID0gaGFuZGxlLm1hdGVyaWFsLnRlbXBPcGFjaXR5O1xuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZCkge1xuICAgICAgICAgIGhhbmRsZS5tYXRlcmlhbC5vcGFjaXR5ICo9IDAuNTtcbiAgICAgICAgICBoYW5kbGUubWF0ZXJpYWwuY29sb3IubGVycChuZXcgQ29sb3IoMSwgMSwgMSksIDAuNSk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5heGlzKSB7XG4gICAgICAgICAgaWYgKGhhbmRsZS5uYW1lID09PSB0aGlzLmF4aXMpIHtcbiAgICAgICAgICAgIGhhbmRsZS5tYXRlcmlhbC5vcGFjaXR5ID0gMTtcbiAgICAgICAgICAgIGhhbmRsZS5tYXRlcmlhbC5jb2xvci5sZXJwKG5ldyBDb2xvcigxLCAxLCAxKSwgMC41KTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuYXhpcy5zcGxpdChcIlwiKS5zb21lKGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGUubmFtZSA9PT0gYTtcbiAgICAgICAgICB9KSkge1xuICAgICAgICAgICAgaGFuZGxlLm1hdGVyaWFsLm9wYWNpdHkgPSAxO1xuICAgICAgICAgICAgaGFuZGxlLm1hdGVyaWFsLmNvbG9yLmxlcnAobmV3IENvbG9yKDEsIDEsIDEpLCAwLjUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBoYW5kbGUubWF0ZXJpYWwub3BhY2l0eSAqPSAwLjI1O1xuICAgICAgICAgICAgaGFuZGxlLm1hdGVyaWFsLmNvbG9yLmxlcnAobmV3IENvbG9yKDEsIDEsIDEpLCAwLjUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgc3VwZXIudXBkYXRlTWF0cml4V29ybGQoKTtcbiAgICB9KTtcbiAgICBjb25zdCBnaXptb01hdGVyaWFsID0gbmV3IE1lc2hCYXNpY01hdGVyaWFsKHtcbiAgICAgIGRlcHRoVGVzdDogZmFsc2UsXG4gICAgICBkZXB0aFdyaXRlOiBmYWxzZSxcbiAgICAgIHRyYW5zcGFyZW50OiB0cnVlLFxuICAgICAgc2lkZTogRG91YmxlU2lkZSxcbiAgICAgIGZvZzogZmFsc2UsXG4gICAgICB0b25lTWFwcGVkOiBmYWxzZVxuICAgIH0pO1xuICAgIGNvbnN0IGdpem1vTGluZU1hdGVyaWFsID0gbmV3IExpbmVCYXNpY01hdGVyaWFsKHtcbiAgICAgIGRlcHRoVGVzdDogZmFsc2UsXG4gICAgICBkZXB0aFdyaXRlOiBmYWxzZSxcbiAgICAgIHRyYW5zcGFyZW50OiB0cnVlLFxuICAgICAgbGluZXdpZHRoOiAxLFxuICAgICAgZm9nOiBmYWxzZSxcbiAgICAgIHRvbmVNYXBwZWQ6IGZhbHNlXG4gICAgfSk7XG4gICAgY29uc3QgbWF0SW52aXNpYmxlID0gZ2l6bW9NYXRlcmlhbC5jbG9uZSgpO1xuICAgIG1hdEludmlzaWJsZS5vcGFjaXR5ID0gMC4xNTtcbiAgICBjb25zdCBtYXRIZWxwZXIgPSBnaXptb01hdGVyaWFsLmNsb25lKCk7XG4gICAgbWF0SGVscGVyLm9wYWNpdHkgPSAwLjMzO1xuICAgIGNvbnN0IG1hdFJlZCA9IGdpem1vTWF0ZXJpYWwuY2xvbmUoKTtcbiAgICBtYXRSZWQuY29sb3Iuc2V0KDE2NzExNjgwKTtcbiAgICBjb25zdCBtYXRHcmVlbiA9IGdpem1vTWF0ZXJpYWwuY2xvbmUoKTtcbiAgICBtYXRHcmVlbi5jb2xvci5zZXQoNjUyODApO1xuICAgIGNvbnN0IG1hdEJsdWUgPSBnaXptb01hdGVyaWFsLmNsb25lKCk7XG4gICAgbWF0Qmx1ZS5jb2xvci5zZXQoMjU1KTtcbiAgICBjb25zdCBtYXRXaGl0ZVRyYW5zcGFyZW50ID0gZ2l6bW9NYXRlcmlhbC5jbG9uZSgpO1xuICAgIG1hdFdoaXRlVHJhbnNwYXJlbnQub3BhY2l0eSA9IDAuMjU7XG4gICAgY29uc3QgbWF0WWVsbG93VHJhbnNwYXJlbnQgPSBtYXRXaGl0ZVRyYW5zcGFyZW50LmNsb25lKCk7XG4gICAgbWF0WWVsbG93VHJhbnNwYXJlbnQuY29sb3Iuc2V0KDE2Nzc2OTYwKTtcbiAgICBjb25zdCBtYXRDeWFuVHJhbnNwYXJlbnQgPSBtYXRXaGl0ZVRyYW5zcGFyZW50LmNsb25lKCk7XG4gICAgbWF0Q3lhblRyYW5zcGFyZW50LmNvbG9yLnNldCg2NTUzNSk7XG4gICAgY29uc3QgbWF0TWFnZW50YVRyYW5zcGFyZW50ID0gbWF0V2hpdGVUcmFuc3BhcmVudC5jbG9uZSgpO1xuICAgIG1hdE1hZ2VudGFUcmFuc3BhcmVudC5jb2xvci5zZXQoMTY3MTE5MzUpO1xuICAgIGNvbnN0IG1hdFllbGxvdyA9IGdpem1vTWF0ZXJpYWwuY2xvbmUoKTtcbiAgICBtYXRZZWxsb3cuY29sb3Iuc2V0KDE2Nzc2OTYwKTtcbiAgICBjb25zdCBtYXRMaW5lUmVkID0gZ2l6bW9MaW5lTWF0ZXJpYWwuY2xvbmUoKTtcbiAgICBtYXRMaW5lUmVkLmNvbG9yLnNldCgxNjcxMTY4MCk7XG4gICAgY29uc3QgbWF0TGluZUdyZWVuID0gZ2l6bW9MaW5lTWF0ZXJpYWwuY2xvbmUoKTtcbiAgICBtYXRMaW5lR3JlZW4uY29sb3Iuc2V0KDY1MjgwKTtcbiAgICBjb25zdCBtYXRMaW5lQmx1ZSA9IGdpem1vTGluZU1hdGVyaWFsLmNsb25lKCk7XG4gICAgbWF0TGluZUJsdWUuY29sb3Iuc2V0KDI1NSk7XG4gICAgY29uc3QgbWF0TGluZUN5YW4gPSBnaXptb0xpbmVNYXRlcmlhbC5jbG9uZSgpO1xuICAgIG1hdExpbmVDeWFuLmNvbG9yLnNldCg2NTUzNSk7XG4gICAgY29uc3QgbWF0TGluZU1hZ2VudGEgPSBnaXptb0xpbmVNYXRlcmlhbC5jbG9uZSgpO1xuICAgIG1hdExpbmVNYWdlbnRhLmNvbG9yLnNldCgxNjcxMTkzNSk7XG4gICAgY29uc3QgbWF0TGluZVllbGxvdyA9IGdpem1vTGluZU1hdGVyaWFsLmNsb25lKCk7XG4gICAgbWF0TGluZVllbGxvdy5jb2xvci5zZXQoMTY3NzY5NjApO1xuICAgIGNvbnN0IG1hdExpbmVHcmF5ID0gZ2l6bW9MaW5lTWF0ZXJpYWwuY2xvbmUoKTtcbiAgICBtYXRMaW5lR3JheS5jb2xvci5zZXQoNzg5NTE2MCk7XG4gICAgY29uc3QgbWF0TGluZVllbGxvd1RyYW5zcGFyZW50ID0gbWF0TGluZVllbGxvdy5jbG9uZSgpO1xuICAgIG1hdExpbmVZZWxsb3dUcmFuc3BhcmVudC5vcGFjaXR5ID0gMC4yNTtcbiAgICBjb25zdCBhcnJvd0dlb21ldHJ5ID0gbmV3IEN5bGluZGVyR2VvbWV0cnkoMCwgMC4wNSwgMC4yLCAxMiwgMSwgZmFsc2UpO1xuICAgIGNvbnN0IHNjYWxlSGFuZGxlR2VvbWV0cnkgPSBuZXcgQm94R2VvbWV0cnkoMC4xMjUsIDAuMTI1LCAwLjEyNSk7XG4gICAgY29uc3QgbGluZUdlb21ldHJ5ID0gbmV3IEJ1ZmZlckdlb21ldHJ5KCk7XG4gICAgbGluZUdlb21ldHJ5LnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsIG5ldyBGbG9hdDMyQnVmZmVyQXR0cmlidXRlKFswLCAwLCAwLCAxLCAwLCAwXSwgMykpO1xuICAgIGNvbnN0IENpcmNsZUdlb21ldHJ5ID0gKHJhZGl1cywgYXJjKSA9PiB7XG4gICAgICBjb25zdCBnZW9tZXRyeSA9IG5ldyBCdWZmZXJHZW9tZXRyeSgpO1xuICAgICAgY29uc3QgdmVydGljZXMgPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IDY0ICogYXJjOyArK2kpIHtcbiAgICAgICAgdmVydGljZXMucHVzaCgwLCBNYXRoLmNvcyhpIC8gMzIgKiBNYXRoLlBJKSAqIHJhZGl1cywgTWF0aC5zaW4oaSAvIDMyICogTWF0aC5QSSkgKiByYWRpdXMpO1xuICAgICAgfVxuICAgICAgZ2VvbWV0cnkuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIiwgbmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUodmVydGljZXMsIDMpKTtcbiAgICAgIHJldHVybiBnZW9tZXRyeTtcbiAgICB9O1xuICAgIGNvbnN0IFRyYW5zbGF0ZUhlbHBlckdlb21ldHJ5ID0gKCkgPT4ge1xuICAgICAgY29uc3QgZ2VvbWV0cnkgPSBuZXcgQnVmZmVyR2VvbWV0cnkoKTtcbiAgICAgIGdlb21ldHJ5LnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsIG5ldyBGbG9hdDMyQnVmZmVyQXR0cmlidXRlKFswLCAwLCAwLCAxLCAxLCAxXSwgMykpO1xuICAgICAgcmV0dXJuIGdlb21ldHJ5O1xuICAgIH07XG4gICAgY29uc3QgZ2l6bW9UcmFuc2xhdGUgPSB7XG4gICAgICBYOiBbXG4gICAgICAgIFtuZXcgTWVzaChhcnJvd0dlb21ldHJ5LCBtYXRSZWQpLCBbMSwgMCwgMF0sIFswLCAwLCAtTWF0aC5QSSAvIDJdLCBudWxsLCBcImZ3ZFwiXSxcbiAgICAgICAgW25ldyBNZXNoKGFycm93R2VvbWV0cnksIG1hdFJlZCksIFsxLCAwLCAwXSwgWzAsIDAsIE1hdGguUEkgLyAyXSwgbnVsbCwgXCJid2RcIl0sXG4gICAgICAgIFtuZXcgTGluZShsaW5lR2VvbWV0cnksIG1hdExpbmVSZWQpXVxuICAgICAgXSxcbiAgICAgIFk6IFtcbiAgICAgICAgW25ldyBNZXNoKGFycm93R2VvbWV0cnksIG1hdEdyZWVuKSwgWzAsIDEsIDBdLCBudWxsLCBudWxsLCBcImZ3ZFwiXSxcbiAgICAgICAgW25ldyBNZXNoKGFycm93R2VvbWV0cnksIG1hdEdyZWVuKSwgWzAsIDEsIDBdLCBbTWF0aC5QSSwgMCwgMF0sIG51bGwsIFwiYndkXCJdLFxuICAgICAgICBbbmV3IExpbmUobGluZUdlb21ldHJ5LCBtYXRMaW5lR3JlZW4pLCBudWxsLCBbMCwgMCwgTWF0aC5QSSAvIDJdXVxuICAgICAgXSxcbiAgICAgIFo6IFtcbiAgICAgICAgW25ldyBNZXNoKGFycm93R2VvbWV0cnksIG1hdEJsdWUpLCBbMCwgMCwgMV0sIFtNYXRoLlBJIC8gMiwgMCwgMF0sIG51bGwsIFwiZndkXCJdLFxuICAgICAgICBbbmV3IE1lc2goYXJyb3dHZW9tZXRyeSwgbWF0Qmx1ZSksIFswLCAwLCAxXSwgWy1NYXRoLlBJIC8gMiwgMCwgMF0sIG51bGwsIFwiYndkXCJdLFxuICAgICAgICBbbmV3IExpbmUobGluZUdlb21ldHJ5LCBtYXRMaW5lQmx1ZSksIG51bGwsIFswLCAtTWF0aC5QSSAvIDIsIDBdXVxuICAgICAgXSxcbiAgICAgIFhZWjogW1tuZXcgTWVzaChuZXcgT2N0YWhlZHJvbkdlb21ldHJ5KDAuMSwgMCksIG1hdFdoaXRlVHJhbnNwYXJlbnQuY2xvbmUoKSksIFswLCAwLCAwXSwgWzAsIDAsIDBdXV0sXG4gICAgICBYWTogW1xuICAgICAgICBbbmV3IE1lc2gobmV3IFBsYW5lR2VvbWV0cnkoMC4yOTUsIDAuMjk1KSwgbWF0WWVsbG93VHJhbnNwYXJlbnQuY2xvbmUoKSksIFswLjE1LCAwLjE1LCAwXV0sXG4gICAgICAgIFtuZXcgTGluZShsaW5lR2VvbWV0cnksIG1hdExpbmVZZWxsb3cpLCBbMC4xOCwgMC4zLCAwXSwgbnVsbCwgWzAuMTI1LCAxLCAxXV0sXG4gICAgICAgIFtuZXcgTGluZShsaW5lR2VvbWV0cnksIG1hdExpbmVZZWxsb3cpLCBbMC4zLCAwLjE4LCAwXSwgWzAsIDAsIE1hdGguUEkgLyAyXSwgWzAuMTI1LCAxLCAxXV1cbiAgICAgIF0sXG4gICAgICBZWjogW1xuICAgICAgICBbbmV3IE1lc2gobmV3IFBsYW5lR2VvbWV0cnkoMC4yOTUsIDAuMjk1KSwgbWF0Q3lhblRyYW5zcGFyZW50LmNsb25lKCkpLCBbMCwgMC4xNSwgMC4xNV0sIFswLCBNYXRoLlBJIC8gMiwgMF1dLFxuICAgICAgICBbbmV3IExpbmUobGluZUdlb21ldHJ5LCBtYXRMaW5lQ3lhbiksIFswLCAwLjE4LCAwLjNdLCBbMCwgMCwgTWF0aC5QSSAvIDJdLCBbMC4xMjUsIDEsIDFdXSxcbiAgICAgICAgW25ldyBMaW5lKGxpbmVHZW9tZXRyeSwgbWF0TGluZUN5YW4pLCBbMCwgMC4zLCAwLjE4XSwgWzAsIC1NYXRoLlBJIC8gMiwgMF0sIFswLjEyNSwgMSwgMV1dXG4gICAgICBdLFxuICAgICAgWFo6IFtcbiAgICAgICAgW1xuICAgICAgICAgIG5ldyBNZXNoKG5ldyBQbGFuZUdlb21ldHJ5KDAuMjk1LCAwLjI5NSksIG1hdE1hZ2VudGFUcmFuc3BhcmVudC5jbG9uZSgpKSxcbiAgICAgICAgICBbMC4xNSwgMCwgMC4xNV0sXG4gICAgICAgICAgWy1NYXRoLlBJIC8gMiwgMCwgMF1cbiAgICAgICAgXSxcbiAgICAgICAgW25ldyBMaW5lKGxpbmVHZW9tZXRyeSwgbWF0TGluZU1hZ2VudGEpLCBbMC4xOCwgMCwgMC4zXSwgbnVsbCwgWzAuMTI1LCAxLCAxXV0sXG4gICAgICAgIFtuZXcgTGluZShsaW5lR2VvbWV0cnksIG1hdExpbmVNYWdlbnRhKSwgWzAuMywgMCwgMC4xOF0sIFswLCAtTWF0aC5QSSAvIDIsIDBdLCBbMC4xMjUsIDEsIDFdXVxuICAgICAgXVxuICAgIH07XG4gICAgY29uc3QgcGlja2VyVHJhbnNsYXRlID0ge1xuICAgICAgWDogW1tuZXcgTWVzaChuZXcgQ3lsaW5kZXJHZW9tZXRyeSgwLjIsIDAsIDEsIDQsIDEsIGZhbHNlKSwgbWF0SW52aXNpYmxlKSwgWzAuNiwgMCwgMF0sIFswLCAwLCAtTWF0aC5QSSAvIDJdXV0sXG4gICAgICBZOiBbW25ldyBNZXNoKG5ldyBDeWxpbmRlckdlb21ldHJ5KDAuMiwgMCwgMSwgNCwgMSwgZmFsc2UpLCBtYXRJbnZpc2libGUpLCBbMCwgMC42LCAwXV1dLFxuICAgICAgWjogW1tuZXcgTWVzaChuZXcgQ3lsaW5kZXJHZW9tZXRyeSgwLjIsIDAsIDEsIDQsIDEsIGZhbHNlKSwgbWF0SW52aXNpYmxlKSwgWzAsIDAsIDAuNl0sIFtNYXRoLlBJIC8gMiwgMCwgMF1dXSxcbiAgICAgIFhZWjogW1tuZXcgTWVzaChuZXcgT2N0YWhlZHJvbkdlb21ldHJ5KDAuMiwgMCksIG1hdEludmlzaWJsZSldXSxcbiAgICAgIFhZOiBbW25ldyBNZXNoKG5ldyBQbGFuZUdlb21ldHJ5KDAuNCwgMC40KSwgbWF0SW52aXNpYmxlKSwgWzAuMiwgMC4yLCAwXV1dLFxuICAgICAgWVo6IFtbbmV3IE1lc2gobmV3IFBsYW5lR2VvbWV0cnkoMC40LCAwLjQpLCBtYXRJbnZpc2libGUpLCBbMCwgMC4yLCAwLjJdLCBbMCwgTWF0aC5QSSAvIDIsIDBdXV0sXG4gICAgICBYWjogW1tuZXcgTWVzaChuZXcgUGxhbmVHZW9tZXRyeSgwLjQsIDAuNCksIG1hdEludmlzaWJsZSksIFswLjIsIDAsIDAuMl0sIFstTWF0aC5QSSAvIDIsIDAsIDBdXV1cbiAgICB9O1xuICAgIGNvbnN0IGhlbHBlclRyYW5zbGF0ZSA9IHtcbiAgICAgIFNUQVJUOiBbW25ldyBNZXNoKG5ldyBPY3RhaGVkcm9uR2VvbWV0cnkoMC4wMSwgMiksIG1hdEhlbHBlciksIG51bGwsIG51bGwsIG51bGwsIFwiaGVscGVyXCJdXSxcbiAgICAgIEVORDogW1tuZXcgTWVzaChuZXcgT2N0YWhlZHJvbkdlb21ldHJ5KDAuMDEsIDIpLCBtYXRIZWxwZXIpLCBudWxsLCBudWxsLCBudWxsLCBcImhlbHBlclwiXV0sXG4gICAgICBERUxUQTogW1tuZXcgTGluZShUcmFuc2xhdGVIZWxwZXJHZW9tZXRyeSgpLCBtYXRIZWxwZXIpLCBudWxsLCBudWxsLCBudWxsLCBcImhlbHBlclwiXV0sXG4gICAgICBYOiBbW25ldyBMaW5lKGxpbmVHZW9tZXRyeSwgbWF0SGVscGVyLmNsb25lKCkpLCBbLTFlMywgMCwgMF0sIG51bGwsIFsxZTYsIDEsIDFdLCBcImhlbHBlclwiXV0sXG4gICAgICBZOiBbW25ldyBMaW5lKGxpbmVHZW9tZXRyeSwgbWF0SGVscGVyLmNsb25lKCkpLCBbMCwgLTFlMywgMF0sIFswLCAwLCBNYXRoLlBJIC8gMl0sIFsxZTYsIDEsIDFdLCBcImhlbHBlclwiXV0sXG4gICAgICBaOiBbW25ldyBMaW5lKGxpbmVHZW9tZXRyeSwgbWF0SGVscGVyLmNsb25lKCkpLCBbMCwgMCwgLTFlM10sIFswLCAtTWF0aC5QSSAvIDIsIDBdLCBbMWU2LCAxLCAxXSwgXCJoZWxwZXJcIl1dXG4gICAgfTtcbiAgICBjb25zdCBnaXptb1JvdGF0ZSA9IHtcbiAgICAgIFg6IFtcbiAgICAgICAgW25ldyBMaW5lKENpcmNsZUdlb21ldHJ5KDEsIDAuNSksIG1hdExpbmVSZWQpXSxcbiAgICAgICAgW25ldyBNZXNoKG5ldyBPY3RhaGVkcm9uR2VvbWV0cnkoMC4wNCwgMCksIG1hdFJlZCksIFswLCAwLCAwLjk5XSwgbnVsbCwgWzEsIDMsIDFdXVxuICAgICAgXSxcbiAgICAgIFk6IFtcbiAgICAgICAgW25ldyBMaW5lKENpcmNsZUdlb21ldHJ5KDEsIDAuNSksIG1hdExpbmVHcmVlbiksIG51bGwsIFswLCAwLCAtTWF0aC5QSSAvIDJdXSxcbiAgICAgICAgW25ldyBNZXNoKG5ldyBPY3RhaGVkcm9uR2VvbWV0cnkoMC4wNCwgMCksIG1hdEdyZWVuKSwgWzAsIDAsIDAuOTldLCBudWxsLCBbMywgMSwgMV1dXG4gICAgICBdLFxuICAgICAgWjogW1xuICAgICAgICBbbmV3IExpbmUoQ2lyY2xlR2VvbWV0cnkoMSwgMC41KSwgbWF0TGluZUJsdWUpLCBudWxsLCBbMCwgTWF0aC5QSSAvIDIsIDBdXSxcbiAgICAgICAgW25ldyBNZXNoKG5ldyBPY3RhaGVkcm9uR2VvbWV0cnkoMC4wNCwgMCksIG1hdEJsdWUpLCBbMC45OSwgMCwgMF0sIG51bGwsIFsxLCAzLCAxXV1cbiAgICAgIF0sXG4gICAgICBFOiBbXG4gICAgICAgIFtuZXcgTGluZShDaXJjbGVHZW9tZXRyeSgxLjI1LCAxKSwgbWF0TGluZVllbGxvd1RyYW5zcGFyZW50KSwgbnVsbCwgWzAsIE1hdGguUEkgLyAyLCAwXV0sXG4gICAgICAgIFtcbiAgICAgICAgICBuZXcgTWVzaChuZXcgQ3lsaW5kZXJHZW9tZXRyeSgwLjAzLCAwLCAwLjE1LCA0LCAxLCBmYWxzZSksIG1hdExpbmVZZWxsb3dUcmFuc3BhcmVudCksXG4gICAgICAgICAgWzEuMTcsIDAsIDBdLFxuICAgICAgICAgIFswLCAwLCAtTWF0aC5QSSAvIDJdLFxuICAgICAgICAgIFsxLCAxLCAxZS0zXVxuICAgICAgICBdLFxuICAgICAgICBbXG4gICAgICAgICAgbmV3IE1lc2gobmV3IEN5bGluZGVyR2VvbWV0cnkoMC4wMywgMCwgMC4xNSwgNCwgMSwgZmFsc2UpLCBtYXRMaW5lWWVsbG93VHJhbnNwYXJlbnQpLFxuICAgICAgICAgIFstMS4xNywgMCwgMF0sXG4gICAgICAgICAgWzAsIDAsIE1hdGguUEkgLyAyXSxcbiAgICAgICAgICBbMSwgMSwgMWUtM11cbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgIG5ldyBNZXNoKG5ldyBDeWxpbmRlckdlb21ldHJ5KDAuMDMsIDAsIDAuMTUsIDQsIDEsIGZhbHNlKSwgbWF0TGluZVllbGxvd1RyYW5zcGFyZW50KSxcbiAgICAgICAgICBbMCwgLTEuMTcsIDBdLFxuICAgICAgICAgIFtNYXRoLlBJLCAwLCAwXSxcbiAgICAgICAgICBbMSwgMSwgMWUtM11cbiAgICAgICAgXSxcbiAgICAgICAgW1xuICAgICAgICAgIG5ldyBNZXNoKG5ldyBDeWxpbmRlckdlb21ldHJ5KDAuMDMsIDAsIDAuMTUsIDQsIDEsIGZhbHNlKSwgbWF0TGluZVllbGxvd1RyYW5zcGFyZW50KSxcbiAgICAgICAgICBbMCwgMS4xNywgMF0sXG4gICAgICAgICAgWzAsIDAsIDBdLFxuICAgICAgICAgIFsxLCAxLCAxZS0zXVxuICAgICAgICBdXG4gICAgICBdLFxuICAgICAgWFlaRTogW1tuZXcgTGluZShDaXJjbGVHZW9tZXRyeSgxLCAxKSwgbWF0TGluZUdyYXkpLCBudWxsLCBbMCwgTWF0aC5QSSAvIDIsIDBdXV1cbiAgICB9O1xuICAgIGNvbnN0IGhlbHBlclJvdGF0ZSA9IHtcbiAgICAgIEFYSVM6IFtbbmV3IExpbmUobGluZUdlb21ldHJ5LCBtYXRIZWxwZXIuY2xvbmUoKSksIFstMWUzLCAwLCAwXSwgbnVsbCwgWzFlNiwgMSwgMV0sIFwiaGVscGVyXCJdXVxuICAgIH07XG4gICAgY29uc3QgcGlja2VyUm90YXRlID0ge1xuICAgICAgWDogW1tuZXcgTWVzaChuZXcgVG9ydXNHZW9tZXRyeSgxLCAwLjEsIDQsIDI0KSwgbWF0SW52aXNpYmxlKSwgWzAsIDAsIDBdLCBbMCwgLU1hdGguUEkgLyAyLCAtTWF0aC5QSSAvIDJdXV0sXG4gICAgICBZOiBbW25ldyBNZXNoKG5ldyBUb3J1c0dlb21ldHJ5KDEsIDAuMSwgNCwgMjQpLCBtYXRJbnZpc2libGUpLCBbMCwgMCwgMF0sIFtNYXRoLlBJIC8gMiwgMCwgMF1dXSxcbiAgICAgIFo6IFtbbmV3IE1lc2gobmV3IFRvcnVzR2VvbWV0cnkoMSwgMC4xLCA0LCAyNCksIG1hdEludmlzaWJsZSksIFswLCAwLCAwXSwgWzAsIDAsIC1NYXRoLlBJIC8gMl1dXSxcbiAgICAgIEU6IFtbbmV3IE1lc2gobmV3IFRvcnVzR2VvbWV0cnkoMS4yNSwgMC4xLCAyLCAyNCksIG1hdEludmlzaWJsZSldXSxcbiAgICAgIFhZWkU6IFtbbmV3IE1lc2gobmV3IFNwaGVyZUdlb21ldHJ5KDAuNywgMTAsIDgpLCBtYXRJbnZpc2libGUpXV1cbiAgICB9O1xuICAgIGNvbnN0IGdpem1vU2NhbGUgPSB7XG4gICAgICBYOiBbXG4gICAgICAgIFtuZXcgTWVzaChzY2FsZUhhbmRsZUdlb21ldHJ5LCBtYXRSZWQpLCBbMC44LCAwLCAwXSwgWzAsIDAsIC1NYXRoLlBJIC8gMl1dLFxuICAgICAgICBbbmV3IExpbmUobGluZUdlb21ldHJ5LCBtYXRMaW5lUmVkKSwgbnVsbCwgbnVsbCwgWzAuOCwgMSwgMV1dXG4gICAgICBdLFxuICAgICAgWTogW1xuICAgICAgICBbbmV3IE1lc2goc2NhbGVIYW5kbGVHZW9tZXRyeSwgbWF0R3JlZW4pLCBbMCwgMC44LCAwXV0sXG4gICAgICAgIFtuZXcgTGluZShsaW5lR2VvbWV0cnksIG1hdExpbmVHcmVlbiksIG51bGwsIFswLCAwLCBNYXRoLlBJIC8gMl0sIFswLjgsIDEsIDFdXVxuICAgICAgXSxcbiAgICAgIFo6IFtcbiAgICAgICAgW25ldyBNZXNoKHNjYWxlSGFuZGxlR2VvbWV0cnksIG1hdEJsdWUpLCBbMCwgMCwgMC44XSwgW01hdGguUEkgLyAyLCAwLCAwXV0sXG4gICAgICAgIFtuZXcgTGluZShsaW5lR2VvbWV0cnksIG1hdExpbmVCbHVlKSwgbnVsbCwgWzAsIC1NYXRoLlBJIC8gMiwgMF0sIFswLjgsIDEsIDFdXVxuICAgICAgXSxcbiAgICAgIFhZOiBbXG4gICAgICAgIFtuZXcgTWVzaChzY2FsZUhhbmRsZUdlb21ldHJ5LCBtYXRZZWxsb3dUcmFuc3BhcmVudCksIFswLjg1LCAwLjg1LCAwXSwgbnVsbCwgWzIsIDIsIDAuMl1dLFxuICAgICAgICBbbmV3IExpbmUobGluZUdlb21ldHJ5LCBtYXRMaW5lWWVsbG93KSwgWzAuODU1LCAwLjk4LCAwXSwgbnVsbCwgWzAuMTI1LCAxLCAxXV0sXG4gICAgICAgIFtuZXcgTGluZShsaW5lR2VvbWV0cnksIG1hdExpbmVZZWxsb3cpLCBbMC45OCwgMC44NTUsIDBdLCBbMCwgMCwgTWF0aC5QSSAvIDJdLCBbMC4xMjUsIDEsIDFdXVxuICAgICAgXSxcbiAgICAgIFlaOiBbXG4gICAgICAgIFtuZXcgTWVzaChzY2FsZUhhbmRsZUdlb21ldHJ5LCBtYXRDeWFuVHJhbnNwYXJlbnQpLCBbMCwgMC44NSwgMC44NV0sIG51bGwsIFswLjIsIDIsIDJdXSxcbiAgICAgICAgW25ldyBMaW5lKGxpbmVHZW9tZXRyeSwgbWF0TGluZUN5YW4pLCBbMCwgMC44NTUsIDAuOThdLCBbMCwgMCwgTWF0aC5QSSAvIDJdLCBbMC4xMjUsIDEsIDFdXSxcbiAgICAgICAgW25ldyBMaW5lKGxpbmVHZW9tZXRyeSwgbWF0TGluZUN5YW4pLCBbMCwgMC45OCwgMC44NTVdLCBbMCwgLU1hdGguUEkgLyAyLCAwXSwgWzAuMTI1LCAxLCAxXV1cbiAgICAgIF0sXG4gICAgICBYWjogW1xuICAgICAgICBbbmV3IE1lc2goc2NhbGVIYW5kbGVHZW9tZXRyeSwgbWF0TWFnZW50YVRyYW5zcGFyZW50KSwgWzAuODUsIDAsIDAuODVdLCBudWxsLCBbMiwgMC4yLCAyXV0sXG4gICAgICAgIFtuZXcgTGluZShsaW5lR2VvbWV0cnksIG1hdExpbmVNYWdlbnRhKSwgWzAuODU1LCAwLCAwLjk4XSwgbnVsbCwgWzAuMTI1LCAxLCAxXV0sXG4gICAgICAgIFtuZXcgTGluZShsaW5lR2VvbWV0cnksIG1hdExpbmVNYWdlbnRhKSwgWzAuOTgsIDAsIDAuODU1XSwgWzAsIC1NYXRoLlBJIC8gMiwgMF0sIFswLjEyNSwgMSwgMV1dXG4gICAgICBdLFxuICAgICAgWFlaWDogW1tuZXcgTWVzaChuZXcgQm94R2VvbWV0cnkoMC4xMjUsIDAuMTI1LCAwLjEyNSksIG1hdFdoaXRlVHJhbnNwYXJlbnQuY2xvbmUoKSksIFsxLjEsIDAsIDBdXV0sXG4gICAgICBYWVpZOiBbW25ldyBNZXNoKG5ldyBCb3hHZW9tZXRyeSgwLjEyNSwgMC4xMjUsIDAuMTI1KSwgbWF0V2hpdGVUcmFuc3BhcmVudC5jbG9uZSgpKSwgWzAsIDEuMSwgMF1dXSxcbiAgICAgIFhZWlo6IFtbbmV3IE1lc2gobmV3IEJveEdlb21ldHJ5KDAuMTI1LCAwLjEyNSwgMC4xMjUpLCBtYXRXaGl0ZVRyYW5zcGFyZW50LmNsb25lKCkpLCBbMCwgMCwgMS4xXV1dXG4gICAgfTtcbiAgICBjb25zdCBwaWNrZXJTY2FsZSA9IHtcbiAgICAgIFg6IFtbbmV3IE1lc2gobmV3IEN5bGluZGVyR2VvbWV0cnkoMC4yLCAwLCAwLjgsIDQsIDEsIGZhbHNlKSwgbWF0SW52aXNpYmxlKSwgWzAuNSwgMCwgMF0sIFswLCAwLCAtTWF0aC5QSSAvIDJdXV0sXG4gICAgICBZOiBbW25ldyBNZXNoKG5ldyBDeWxpbmRlckdlb21ldHJ5KDAuMiwgMCwgMC44LCA0LCAxLCBmYWxzZSksIG1hdEludmlzaWJsZSksIFswLCAwLjUsIDBdXV0sXG4gICAgICBaOiBbW25ldyBNZXNoKG5ldyBDeWxpbmRlckdlb21ldHJ5KDAuMiwgMCwgMC44LCA0LCAxLCBmYWxzZSksIG1hdEludmlzaWJsZSksIFswLCAwLCAwLjVdLCBbTWF0aC5QSSAvIDIsIDAsIDBdXV0sXG4gICAgICBYWTogW1tuZXcgTWVzaChzY2FsZUhhbmRsZUdlb21ldHJ5LCBtYXRJbnZpc2libGUpLCBbMC44NSwgMC44NSwgMF0sIG51bGwsIFszLCAzLCAwLjJdXV0sXG4gICAgICBZWjogW1tuZXcgTWVzaChzY2FsZUhhbmRsZUdlb21ldHJ5LCBtYXRJbnZpc2libGUpLCBbMCwgMC44NSwgMC44NV0sIG51bGwsIFswLjIsIDMsIDNdXV0sXG4gICAgICBYWjogW1tuZXcgTWVzaChzY2FsZUhhbmRsZUdlb21ldHJ5LCBtYXRJbnZpc2libGUpLCBbMC44NSwgMCwgMC44NV0sIG51bGwsIFszLCAwLjIsIDNdXV0sXG4gICAgICBYWVpYOiBbW25ldyBNZXNoKG5ldyBCb3hHZW9tZXRyeSgwLjIsIDAuMiwgMC4yKSwgbWF0SW52aXNpYmxlKSwgWzEuMSwgMCwgMF1dXSxcbiAgICAgIFhZWlk6IFtbbmV3IE1lc2gobmV3IEJveEdlb21ldHJ5KDAuMiwgMC4yLCAwLjIpLCBtYXRJbnZpc2libGUpLCBbMCwgMS4xLCAwXV1dLFxuICAgICAgWFlaWjogW1tuZXcgTWVzaChuZXcgQm94R2VvbWV0cnkoMC4yLCAwLjIsIDAuMiksIG1hdEludmlzaWJsZSksIFswLCAwLCAxLjFdXV1cbiAgICB9O1xuICAgIGNvbnN0IGhlbHBlclNjYWxlID0ge1xuICAgICAgWDogW1tuZXcgTGluZShsaW5lR2VvbWV0cnksIG1hdEhlbHBlci5jbG9uZSgpKSwgWy0xZTMsIDAsIDBdLCBudWxsLCBbMWU2LCAxLCAxXSwgXCJoZWxwZXJcIl1dLFxuICAgICAgWTogW1tuZXcgTGluZShsaW5lR2VvbWV0cnksIG1hdEhlbHBlci5jbG9uZSgpKSwgWzAsIC0xZTMsIDBdLCBbMCwgMCwgTWF0aC5QSSAvIDJdLCBbMWU2LCAxLCAxXSwgXCJoZWxwZXJcIl1dLFxuICAgICAgWjogW1tuZXcgTGluZShsaW5lR2VvbWV0cnksIG1hdEhlbHBlci5jbG9uZSgpKSwgWzAsIDAsIC0xZTNdLCBbMCwgLU1hdGguUEkgLyAyLCAwXSwgWzFlNiwgMSwgMV0sIFwiaGVscGVyXCJdXVxuICAgIH07XG4gICAgY29uc3Qgc2V0dXBHaXptbyA9IChnaXptb01hcCkgPT4ge1xuICAgICAgY29uc3QgZ2l6bW8gPSBuZXcgT2JqZWN0M0QoKTtcbiAgICAgIGZvciAobGV0IG5hbWUgaW4gZ2l6bW9NYXApIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IGdpem1vTWFwW25hbWVdLmxlbmd0aDsgaS0tOyApIHtcbiAgICAgICAgICBjb25zdCBvYmplY3QgPSBnaXptb01hcFtuYW1lXVtpXVswXS5jbG9uZSgpO1xuICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0gZ2l6bW9NYXBbbmFtZV1baV1bMV07XG4gICAgICAgICAgY29uc3Qgcm90YXRpb24gPSBnaXptb01hcFtuYW1lXVtpXVsyXTtcbiAgICAgICAgICBjb25zdCBzY2FsZSA9IGdpem1vTWFwW25hbWVdW2ldWzNdO1xuICAgICAgICAgIGNvbnN0IHRhZyA9IGdpem1vTWFwW25hbWVdW2ldWzRdO1xuICAgICAgICAgIG9iamVjdC5uYW1lID0gbmFtZTtcbiAgICAgICAgICBvYmplY3QudGFnID0gdGFnO1xuICAgICAgICAgIGlmIChwb3NpdGlvbikge1xuICAgICAgICAgICAgb2JqZWN0LnBvc2l0aW9uLnNldChwb3NpdGlvblswXSwgcG9zaXRpb25bMV0sIHBvc2l0aW9uWzJdKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHJvdGF0aW9uKSB7XG4gICAgICAgICAgICBvYmplY3Qucm90YXRpb24uc2V0KHJvdGF0aW9uWzBdLCByb3RhdGlvblsxXSwgcm90YXRpb25bMl0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc2NhbGUpIHtcbiAgICAgICAgICAgIG9iamVjdC5zY2FsZS5zZXQoc2NhbGVbMF0sIHNjYWxlWzFdLCBzY2FsZVsyXSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIG9iamVjdC51cGRhdGVNYXRyaXgoKTtcbiAgICAgICAgICBjb25zdCB0ZW1wR2VvbWV0cnkgPSBvYmplY3QuZ2VvbWV0cnkuY2xvbmUoKTtcbiAgICAgICAgICB0ZW1wR2VvbWV0cnkuYXBwbHlNYXRyaXg0KG9iamVjdC5tYXRyaXgpO1xuICAgICAgICAgIG9iamVjdC5nZW9tZXRyeSA9IHRlbXBHZW9tZXRyeTtcbiAgICAgICAgICBvYmplY3QucmVuZGVyT3JkZXIgPSBJbmZpbml0eTtcbiAgICAgICAgICBvYmplY3QucG9zaXRpb24uc2V0KDAsIDAsIDApO1xuICAgICAgICAgIG9iamVjdC5yb3RhdGlvbi5zZXQoMCwgMCwgMCk7XG4gICAgICAgICAgb2JqZWN0LnNjYWxlLnNldCgxLCAxLCAxKTtcbiAgICAgICAgICBnaXptby5hZGQob2JqZWN0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGdpem1vO1xuICAgIH07XG4gICAgdGhpcy5naXptbyA9IHt9O1xuICAgIHRoaXMucGlja2VyID0ge307XG4gICAgdGhpcy5oZWxwZXIgPSB7fTtcbiAgICB0aGlzLmFkZCh0aGlzLmdpem1vW1widHJhbnNsYXRlXCJdID0gc2V0dXBHaXptbyhnaXptb1RyYW5zbGF0ZSkpO1xuICAgIHRoaXMuYWRkKHRoaXMuZ2l6bW9bXCJyb3RhdGVcIl0gPSBzZXR1cEdpem1vKGdpem1vUm90YXRlKSk7XG4gICAgdGhpcy5hZGQodGhpcy5naXptb1tcInNjYWxlXCJdID0gc2V0dXBHaXptbyhnaXptb1NjYWxlKSk7XG4gICAgdGhpcy5hZGQodGhpcy5waWNrZXJbXCJ0cmFuc2xhdGVcIl0gPSBzZXR1cEdpem1vKHBpY2tlclRyYW5zbGF0ZSkpO1xuICAgIHRoaXMuYWRkKHRoaXMucGlja2VyW1wicm90YXRlXCJdID0gc2V0dXBHaXptbyhwaWNrZXJSb3RhdGUpKTtcbiAgICB0aGlzLmFkZCh0aGlzLnBpY2tlcltcInNjYWxlXCJdID0gc2V0dXBHaXptbyhwaWNrZXJTY2FsZSkpO1xuICAgIHRoaXMuYWRkKHRoaXMuaGVscGVyW1widHJhbnNsYXRlXCJdID0gc2V0dXBHaXptbyhoZWxwZXJUcmFuc2xhdGUpKTtcbiAgICB0aGlzLmFkZCh0aGlzLmhlbHBlcltcInJvdGF0ZVwiXSA9IHNldHVwR2l6bW8oaGVscGVyUm90YXRlKSk7XG4gICAgdGhpcy5hZGQodGhpcy5oZWxwZXJbXCJzY2FsZVwiXSA9IHNldHVwR2l6bW8oaGVscGVyU2NhbGUpKTtcbiAgICB0aGlzLnBpY2tlcltcInRyYW5zbGF0ZVwiXS52aXNpYmxlID0gZmFsc2U7XG4gICAgdGhpcy5waWNrZXJbXCJyb3RhdGVcIl0udmlzaWJsZSA9IGZhbHNlO1xuICAgIHRoaXMucGlja2VyW1wic2NhbGVcIl0udmlzaWJsZSA9IGZhbHNlO1xuICB9XG59XG5jbGFzcyBUcmFuc2Zvcm1Db250cm9sc1BsYW5lIGV4dGVuZHMgTWVzaCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKFxuICAgICAgbmV3IFBsYW5lR2VvbWV0cnkoMWU1LCAxZTUsIDIsIDIpLFxuICAgICAgbmV3IE1lc2hCYXNpY01hdGVyaWFsKHtcbiAgICAgICAgdmlzaWJsZTogZmFsc2UsXG4gICAgICAgIHdpcmVmcmFtZTogdHJ1ZSxcbiAgICAgICAgc2lkZTogRG91YmxlU2lkZSxcbiAgICAgICAgdHJhbnNwYXJlbnQ6IHRydWUsXG4gICAgICAgIG9wYWNpdHk6IDAuMSxcbiAgICAgICAgdG9uZU1hcHBlZDogZmFsc2VcbiAgICAgIH0pXG4gICAgKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiaXNUcmFuc2Zvcm1Db250cm9sc1BsYW5lXCIsIHRydWUpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJ0eXBlXCIsIFwiVHJhbnNmb3JtQ29udHJvbHNQbGFuZVwiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwidW5pdFhcIiwgbmV3IFZlY3RvcjMoMSwgMCwgMCkpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJ1bml0WVwiLCBuZXcgVmVjdG9yMygwLCAxLCAwKSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInVuaXRaXCIsIG5ldyBWZWN0b3IzKDAsIDAsIDEpKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwidGVtcFZlY3RvclwiLCBuZXcgVmVjdG9yMygpKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiZGlyVmVjdG9yXCIsIG5ldyBWZWN0b3IzKCkpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJhbGlnblZlY3RvclwiLCBuZXcgVmVjdG9yMygpKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwidGVtcE1hdHJpeFwiLCBuZXcgTWF0cml4NCgpKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiaWRlbnRpdHlRdWF0ZXJuaW9uXCIsIG5ldyBRdWF0ZXJuaW9uKCkpO1xuICAgIC8vIHRoZXNlIGFyZSBzZXQgZnJvbSBwYXJlbnQgY2xhc3MgVHJhbnNmb3JtQ29udHJvbHNcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiY2FtZXJhUXVhdGVybmlvblwiLCBuZXcgUXVhdGVybmlvbigpKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwid29ybGRQb3NpdGlvblwiLCBuZXcgVmVjdG9yMygpKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwid29ybGRRdWF0ZXJuaW9uXCIsIG5ldyBRdWF0ZXJuaW9uKCkpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJleWVcIiwgbmV3IFZlY3RvcjMoKSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImF4aXNcIiwgbnVsbCk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcIm1vZGVcIiwgXCJ0cmFuc2xhdGVcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInNwYWNlXCIsIFwid29ybGRcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInVwZGF0ZU1hdHJpeFdvcmxkXCIsICgpID0+IHtcbiAgICAgIGxldCBzcGFjZSA9IHRoaXMuc3BhY2U7XG4gICAgICB0aGlzLnBvc2l0aW9uLmNvcHkodGhpcy53b3JsZFBvc2l0aW9uKTtcbiAgICAgIGlmICh0aGlzLm1vZGUgPT09IFwic2NhbGVcIilcbiAgICAgICAgc3BhY2UgPSBcImxvY2FsXCI7XG4gICAgICB0aGlzLnVuaXRYLnNldCgxLCAwLCAwKS5hcHBseVF1YXRlcm5pb24oc3BhY2UgPT09IFwibG9jYWxcIiA/IHRoaXMud29ybGRRdWF0ZXJuaW9uIDogdGhpcy5pZGVudGl0eVF1YXRlcm5pb24pO1xuICAgICAgdGhpcy51bml0WS5zZXQoMCwgMSwgMCkuYXBwbHlRdWF0ZXJuaW9uKHNwYWNlID09PSBcImxvY2FsXCIgPyB0aGlzLndvcmxkUXVhdGVybmlvbiA6IHRoaXMuaWRlbnRpdHlRdWF0ZXJuaW9uKTtcbiAgICAgIHRoaXMudW5pdFouc2V0KDAsIDAsIDEpLmFwcGx5UXVhdGVybmlvbihzcGFjZSA9PT0gXCJsb2NhbFwiID8gdGhpcy53b3JsZFF1YXRlcm5pb24gOiB0aGlzLmlkZW50aXR5UXVhdGVybmlvbik7XG4gICAgICB0aGlzLmFsaWduVmVjdG9yLmNvcHkodGhpcy51bml0WSk7XG4gICAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xuICAgICAgICBjYXNlIFwidHJhbnNsYXRlXCI6XG4gICAgICAgIGNhc2UgXCJzY2FsZVwiOlxuICAgICAgICAgIHN3aXRjaCAodGhpcy5heGlzKSB7XG4gICAgICAgICAgICBjYXNlIFwiWFwiOlxuICAgICAgICAgICAgICB0aGlzLmFsaWduVmVjdG9yLmNvcHkodGhpcy5leWUpLmNyb3NzKHRoaXMudW5pdFgpO1xuICAgICAgICAgICAgICB0aGlzLmRpclZlY3Rvci5jb3B5KHRoaXMudW5pdFgpLmNyb3NzKHRoaXMuYWxpZ25WZWN0b3IpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJZXCI6XG4gICAgICAgICAgICAgIHRoaXMuYWxpZ25WZWN0b3IuY29weSh0aGlzLmV5ZSkuY3Jvc3ModGhpcy51bml0WSk7XG4gICAgICAgICAgICAgIHRoaXMuZGlyVmVjdG9yLmNvcHkodGhpcy51bml0WSkuY3Jvc3ModGhpcy5hbGlnblZlY3Rvcik7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIlpcIjpcbiAgICAgICAgICAgICAgdGhpcy5hbGlnblZlY3Rvci5jb3B5KHRoaXMuZXllKS5jcm9zcyh0aGlzLnVuaXRaKTtcbiAgICAgICAgICAgICAgdGhpcy5kaXJWZWN0b3IuY29weSh0aGlzLnVuaXRaKS5jcm9zcyh0aGlzLmFsaWduVmVjdG9yKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiWFlcIjpcbiAgICAgICAgICAgICAgdGhpcy5kaXJWZWN0b3IuY29weSh0aGlzLnVuaXRaKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiWVpcIjpcbiAgICAgICAgICAgICAgdGhpcy5kaXJWZWN0b3IuY29weSh0aGlzLnVuaXRYKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiWFpcIjpcbiAgICAgICAgICAgICAgdGhpcy5hbGlnblZlY3Rvci5jb3B5KHRoaXMudW5pdFopO1xuICAgICAgICAgICAgICB0aGlzLmRpclZlY3Rvci5jb3B5KHRoaXMudW5pdFkpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJYWVpcIjpcbiAgICAgICAgICAgIGNhc2UgXCJFXCI6XG4gICAgICAgICAgICAgIHRoaXMuZGlyVmVjdG9yLnNldCgwLCAwLCAwKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwicm90YXRlXCI6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdGhpcy5kaXJWZWN0b3Iuc2V0KDAsIDAsIDApO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuZGlyVmVjdG9yLmxlbmd0aCgpID09PSAwKSB7XG4gICAgICAgIHRoaXMucXVhdGVybmlvbi5jb3B5KHRoaXMuY2FtZXJhUXVhdGVybmlvbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnRlbXBNYXRyaXgubG9va0F0KHRoaXMudGVtcFZlY3Rvci5zZXQoMCwgMCwgMCksIHRoaXMuZGlyVmVjdG9yLCB0aGlzLmFsaWduVmVjdG9yKTtcbiAgICAgICAgdGhpcy5xdWF0ZXJuaW9uLnNldEZyb21Sb3RhdGlvbk1hdHJpeCh0aGlzLnRlbXBNYXRyaXgpO1xuICAgICAgfVxuICAgICAgc3VwZXIudXBkYXRlTWF0cml4V29ybGQoKTtcbiAgICB9KTtcbiAgfVxufVxuZXhwb3J0IHtcbiAgVHJhbnNmb3JtQ29udHJvbHMsXG4gIFRyYW5zZm9ybUNvbnRyb2xzR2l6bW8sXG4gIFRyYW5zZm9ybUNvbnRyb2xzUGxhbmVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UcmFuc2Zvcm1Db250cm9scy5qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/three-stdlib/controls/TransformControls.js\n"));

/***/ })

});